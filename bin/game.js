var loader;if(function(u,y){for(var m in y)u[m]=y[m]}(this,function(u){var y={};function n(m){if(y[m])return y[m].exports;var b=y[m]={i:m,l:!1,exports:{}};return u[m].call(b.exports,b,b.exports,n),b.l=!0,b.exports}return n.m=u,n.c=y,n.d=function(u,y,m){n.o(u,y)||Object.defineProperty(u,y,{enumerable:!0,get:m})},n.r=function(u){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},n.t=function(u,y){if(1&y&&(u=n(u)),8&y)return u;if(4&y&&"object"==typeof u&&u&&u.__esModule)return u;var m=Object.create(null);if(n.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:u}),2&y&&"string"!=typeof u)for(var b in u)n.d(m,b,function(y){return u[y]}.bind(null,b));return m},n.n=function(u){var y=u&&u.__esModule?function(){return u.default}:function(){return u};return n.d(y,"a",y),y},n.o=function(u,y){return Object.prototype.hasOwnProperty.call(u,y)},n.p="",n(n.s=30)}([function(u,y,m){"use strict";var b=this&&this.__assign||function(){return(b=Object.assign||function(u){for(var y,m=1,b=arguments.length;m<b;m++)for(var g in y=arguments[m])Object.prototype.hasOwnProperty.call(y,g)&&(u[g]=y[g]);return u}).apply(this,arguments)},g=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C},_=this&&this.__read||function(u,y){var m="function"==typeof Symbol&&u[Symbol.iterator];if(!m)return u;var b,g,_=m.call(u),C=[];try{for(;(void 0===y||y-- >0)&&!(b=_.next()).done;)C.push(b.value)}catch(u){g={error:u}}finally{try{b&&!b.done&&(m=_.return)&&m.call(_)}finally{if(g)throw g.error}}return C},C=this&&this.__spread||function(){for(var u=[],y=0;y<arguments.length;y++)u=u.concat(_(arguments[y]));return u};Object.defineProperty(y,"__esModule",{value:!0});var x=m(1),w=m(8),O=m(18),T=g([w.EventConstructor()],(function(u,y,m){this.componentId=u,this.componentName=y,this.classId=m}));y.DisposableComponentCreated=T;var R=g([w.EventConstructor()],(function(u){this.componentId=u}));y.DisposableComponentRemoved=R;var A=g([w.EventConstructor()],(function(u,y){this.componentId=u,this.component=y}));function d(u,y){return function(m){if(m.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+m.originalClassName+" with: "+u);if("number"!=typeof y||isNaN(y))throw new Error("classId: "+y+" is an invalid integer");var b=m,r=function(){if(!d.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var m=Array.prototype.slice.call(arguments),g=new(b.bind.apply(b,C([void 0],m))),_=x.newId("C");return Object.defineProperty(g,"__name__symbol_",{enumerable:!1,writable:!1,configurable:!1,value:u}),Object.defineProperty(g,"__component__id_",{enumerable:!1,writable:!1,configurable:!1,value:_}),void 0!==y&&Object.defineProperty(g,"__classId__symbol_",{enumerable:!1,writable:!1,configurable:!1,value:y}),d.engine&&d.engine.registerComponent(g),g};return void 0!==y&&(r.__classId__symbol_=y),r.__name__symbol_=u,r.isComponent=!0,r.isDisposableComponent=!0,r.originalClassName=u,(r.prototype=m.prototype).constructor=m,r}}function f(u){if(!u)throw new TypeError(u+" is not a component.");if(u.__component__id_)return u.__component__id_;throw new TypeError(u+" is not a registered disposable component.")}y.DisposableComponentUpdated=A,y.Component=function(u,y){return function(m){if(m.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+m.originalClassName+" with: "+u);var b=m,r=function(){var m=Array.prototype.slice.call(arguments),g=new(b.bind.apply(b,C([void 0],m)));return Object.defineProperty(g,"__name__symbol_",{enumerable:!1,writable:!1,configurable:!1,value:u}),void 0!==y&&Object.defineProperty(g,"__classId__symbol_",{enumerable:!1,writable:!1,configurable:!1,value:y}),g};return void 0!==y&&(r.__classId__symbol_=y),r.__name__symbol_=u,r.isComponent=!0,r.originalClassName=u,(r.prototype=m.prototype).constructor=m,r}},y.DisposableComponent=d,function(u){u.engine=null}(d=y.DisposableComponent||(y.DisposableComponent={})),y.getComponentName=function(u){if(!u)throw new TypeError(u+" is not a component.");if(u.__name__symbol_)return u.__name__symbol_;throw new TypeError(u+" is not a registered component.")},y.getComponentClassId=function(u){if(!u)throw new TypeError(u+" is not a component.");if(u.__classId__symbol_)return u.__classId__symbol_;if(!u.__name__symbol_)throw new TypeError(u+" is not a registered component.");return null},y.getComponentId=f;var E=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(u,y){if(delete u[y]){var m=y+"_"+Math.random();u[m]=void 0,Object.defineProperty(u,m,b(b({},Object.getOwnPropertyDescriptor(u,m)),{enumerable:!1})),Object.defineProperty(u,y.toString(),{get:function(){return this[m]},set:function(u){var b=this[m];if(this.data[y]=u?f(u):null,this[m]=u,u!==b){this.dirty=!0;for(var g=0;g<this.subscriptions.length;g++)this.subscriptions[g](y,u,b)}},enumerable:!0})}},t.field=function(u,y){delete u[y]&&Object.defineProperty(u,y.toString(),{get:function(){return this.data[y]},set:function(u){var m=this.data[y];if(this.data[y]=u,u!==m){this.dirty=!0;for(var b=0;b<this.subscriptions.length;b++)this.subscriptions[b](y,u,m)}},enumerable:!0})},t.uiValue=function(u,y){delete u[y]&&Object.defineProperty(u,y.toString(),{get:function(){return this.data[y].toString()},set:function(u){var m=this.data[y],b=new O.UIValue(u);if(this.data[y]=b,b!==m){this.dirty=!0;for(var g=0;g<this.subscriptions.length;g++)this.subscriptions[g](y,b,m)}},enumerable:!0})},t.readonly=function(u,y){delete u[y]&&Object.defineProperty(u,y.toString(),{get:function(){if(y in this.data==0)throw new Error("The field "+y+" is uninitialized");return this.data[y]},set:function(u){if(y in this.data)throw new Error("The field "+y+" is readonly");this.data[y]=u,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(u){return this.subscriptions.push(u),this},t.prototype.toJSON=function(){return this.data},t}();y.ObservableComponent=E,y.isDisposableComponent=function(u){return"__component__id_"in u}},function(u,y,m){"use strict";var b=this&&this.__read||function(u,y){var m="function"==typeof Symbol&&u[Symbol.iterator];if(!m)return u;var b,g,_=m.call(u),C=[];try{for(;(void 0===y||y-- >0)&&!(b=_.next()).done;)C.push(b.value)}catch(u){g={error:u}}finally{try{b&&!b.done&&(m=_.return)&&m.call(_)}finally{if(g)throw g.error}}return C},g=this&&this.__spread||function(){for(var u=[],y=0;y<arguments.length;y++)u=u.concat(b(arguments[y]));return u};Object.defineProperty(y,"__esModule",{value:!0});var _=0;y.log=function(){for(var u=[],y=0;y<arguments.length;y++)u[y]=arguments[y];"undefined"!=typeof dcl?dcl.log.apply(dcl,g(u)):console.log.apply(console,g(["DEBUG:"],u))},y.error=function(u,y){"undefined"!=typeof dcl?dcl.error(u,y):console.error("ERROR:",u,y)},y.newId=function(u){if(_++,0===u.length)throw new Error("newId(type: string): type cannot be empty");return u+_.toString(36)},y.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(u){var y=16*Math.random()|0;return("x"===u?y:3&y|8).toString(16)}))},y.buildArray=function(u,y){for(var m=[],b=0;b<u;++b)m.push(y());return m},y.openExternalURL=function(u){"undefined"!=typeof dcl?dcl.openExternalUrl(u):console.error("ERROR: openExternalURL dcl is undefined")},y.openNFTDialog=function(u,y){if(void 0===y&&(y=null),"undefined"!=typeof dcl){var m=u.match(/ethereum:\/\/(.+)\/(.+)/);if(!m||m.length<3)return;dcl.openNFTDialog(m[1],m[2],y)}else console.error("ERROR: openNFTDialog dcl is undefined")}},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),function(u){u[u.CW=0]="CW",u[u.CCW=1]="CCW"}(y.Orientation||(y.Orientation={})),function(u){u[u.LOCAL=0]="LOCAL",u[u.WORLD=1]="WORLD",u[u.BONE=2]="BONE"}(y.Space||(y.Space={})),y.ToGammaSpace=1/2.2,y.ToLinearSpace=2.2,y.Epsilon=1e-6,y.DEG2RAD=Math.PI/180,y.RAD2DEG=360/(2*Math.PI)},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(9),g=m(2),_=m(10),C=m(6),x=function(){function t(u,y,m){void 0===u&&(u=0),void 0===y&&(y=0),void 0===m&&(m=0),this.x=u,this.y=y,this.z=m}return Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var u=Math.abs(this.x),y=Math.abs(this.y);if(u!==y)return!0;var m=Math.abs(this.z);return u!==m||y!==m},enumerable:!0,configurable:!0}),t.Add=function(u,y){return new t(u.x,u.y,u.z).addInPlace(y)},t.GetClipFactor=function(u,y,m,b){var g=t.Dot(u,m)-b;return g/(g-(t.Dot(y,m)-b))},t.GetAngleBetweenVectors=function(u,y,m){var g=u.normalizeToRef(b.MathTmp.Vector3[1]),_=y.normalizeToRef(b.MathTmp.Vector3[2]),C=t.Dot(g,_),x=b.MathTmp.Vector3[3];return t.CrossToRef(g,_,x),t.Dot(x,m)>0?Math.acos(C):-Math.acos(C)},t.FromArray=function(u,y){return void 0===y&&(y=0),new t(u[y],u[y+1],u[y+2])},t.FromFloatArray=function(u,y){return t.FromArray(u,y)},t.FromArrayToRef=function(u,y,m){m.x=u[y],m.y=u[y+1],m.z=u[y+2]},t.FromFloatArrayToRef=function(u,y,m){return t.FromArrayToRef(u,y,m)},t.FromFloatsToRef=function(u,y,m,b){b.copyFromFloats(u,y,m)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},t.Down=function(){return new t(0,-1,0)},t.Forward=function(){return new t(0,0,1)},t.Backward=function(){return new t(0,0,-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(u,y){var m=t.Zero();return t.TransformCoordinatesToRef(u,y,m),m},t.TransformCoordinatesToRef=function(u,y,m){return t.TransformCoordinatesFromFloatsToRef(u.x,u.y,u.z,y,m)},t.TransformCoordinatesFromFloatsToRef=function(u,y,m,b,g){var _=b.m,C=u*_[0]+y*_[4]+m*_[8]+_[12],x=u*_[1]+y*_[5]+m*_[9]+_[13],w=u*_[2]+y*_[6]+m*_[10]+_[14],O=1/(u*_[3]+y*_[7]+m*_[11]+_[15]);g.x=C*O,g.y=x*O,g.z=w*O},t.TransformNormal=function(u,y){var m=t.Zero();return t.TransformNormalToRef(u,y,m),m},t.TransformNormalToRef=function(u,y,m){this.TransformNormalFromFloatsToRef(u.x,u.y,u.z,y,m)},t.TransformNormalFromFloatsToRef=function(u,y,m,b,g){var _=b.m;g.x=u*_[0]+y*_[4]+m*_[8],g.y=u*_[1]+y*_[5]+m*_[9],g.z=u*_[2]+y*_[6]+m*_[10]},t.CatmullRom=function(u,y,m,b,g){var _=g*g,C=g*_;return new t(.5*(2*y.x+(-u.x+m.x)*g+(2*u.x-5*y.x+4*m.x-b.x)*_+(-u.x+3*y.x-3*m.x+b.x)*C),.5*(2*y.y+(-u.y+m.y)*g+(2*u.y-5*y.y+4*m.y-b.y)*_+(-u.y+3*y.y-3*m.y+b.y)*C),.5*(2*y.z+(-u.z+m.z)*g+(2*u.z-5*y.z+4*m.z-b.z)*_+(-u.z+3*y.z-3*m.z+b.z)*C))},t.Clamp=function(u,y,m){var b=new t;return t.ClampToRef(u,y,m,b),b},t.ClampToRef=function(u,y,m,b){var g=u.x;g=(g=g>m.x?m.x:g)<y.x?y.x:g;var _=u.y;_=(_=_>m.y?m.y:_)<y.y?y.y:_;var C=u.z;C=(C=C>m.z?m.z:C)<y.z?y.z:C,b.copyFromFloats(g,_,C)},t.Hermite=function(u,y,m,b,g){var _=g*g,C=g*_,x=2*C-3*_+1,w=-2*C+3*_,O=C-2*_+g,T=C-_;return new t(u.x*x+m.x*w+y.x*O+b.x*T,u.y*x+m.y*w+y.y*O+b.y*T,u.z*x+m.z*w+y.z*O+b.z*T)},t.Lerp=function(u,y,m){var b=new t(0,0,0);return t.LerpToRef(u,y,m,b),b},t.LerpToRef=function(u,y,m,b){b.x=u.x+(y.x-u.x)*m,b.y=u.y+(y.y-u.y)*m,b.z=u.z+(y.z-u.z)*m},t.Dot=function(u,y){return u.x*y.x+u.y*y.y+u.z*y.z},t.Cross=function(u,y){var m=t.Zero();return t.CrossToRef(u,y,m),m},t.CrossToRef=function(u,y,m){var b=u.y*y.z-u.z*y.y,g=u.z*y.x-u.x*y.z,_=u.x*y.y-u.y*y.x;m.copyFromFloats(b,g,_)},t.Normalize=function(u){var y=t.Zero();return t.NormalizeToRef(u,y),y},t.NormalizeToRef=function(u,y){u.normalizeToRef(y)},t.Minimize=function(u,y){var m=new t(u.x,u.y,u.z);return m.minimizeInPlace(y),m},t.Maximize=function(u,y){var m=new t(u.x,u.y,u.z);return m.maximizeInPlace(y),m},t.Distance=function(u,y){return Math.sqrt(t.DistanceSquared(u,y))},t.DistanceSquared=function(u,y){var m=u.x-y.x,b=u.y-y.y,g=u.z-y.z;return m*m+b*b+g*g},t.Center=function(u,y){var m=t.Add(u,y);return m.scaleInPlace(.5),m},t.RotationFromAxis=function(u,y,m){var b=t.Zero();return t.RotationFromAxisToRef(u,y,m,b),b},t.RotationFromAxisToRef=function(u,y,m,g){var C=b.MathTmp.Quaternion[0];_.Quaternion.RotationQuaternionFromAxisToRef(u,y,m,C),g.copyFrom(C.eulerAngles)},t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var u=this.x||0;return 397*(u=397*u^(this.y||0))^(this.z||0)},t.prototype.asArray=function(){var u=[];return this.toArray(u,0),u},t.prototype.toArray=function(u,y){return void 0===y&&(y=0),u[y]=this.x,u[y+1]=this.y,u[y+2]=this.z,this},t.prototype.toQuaternion=function(){return _.Quaternion.Identity.setEuler(this.y,this.x,this.z)},t.prototype.addInPlace=function(u){return this.addInPlaceFromFloats(u.x,u.y,u.z)},t.prototype.addInPlaceFromFloats=function(u,y,m){return this.x+=u,this.y+=y,this.z+=m,this},t.prototype.add=function(u){return new t(this.x+u.x,this.y+u.y,this.z+u.z)},t.prototype.addToRef=function(u,y){return y.copyFromFloats(this.x+u.x,this.y+u.y,this.z+u.z)},t.prototype.subtractInPlace=function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z,this},t.prototype.subtract=function(u){return new t(this.x-u.x,this.y-u.y,this.z-u.z)},t.prototype.subtractToRef=function(u,y){return this.subtractFromFloatsToRef(u.x,u.y,u.z,y)},t.prototype.subtractFromFloats=function(u,y,m){return new t(this.x-u,this.y-y,this.z-m)},t.prototype.subtractFromFloatsToRef=function(u,y,m,b){return b.copyFromFloats(this.x-u,this.y-y,this.z-m)},t.prototype.applyMatrix4=function(u){this.applyMatrix4ToRef(u,this)},t.prototype.applyMatrix4ToRef=function(u,y){var m=this.x,b=this.y,g=this.z,_=u.m,C=1/(_[3]*m+_[7]*b+_[11]*g+_[15]);return y.x=(_[0]*m+_[4]*b+_[8]*g+_[12])*C,y.y=(_[1]*m+_[5]*b+_[9]*g+_[13])*C,y.z=(_[2]*m+_[6]*b+_[10]*g+_[14])*C,y},t.prototype.rotate=function(u){return this.rotateToRef(u,this)},t.prototype.rotateToRef=function(u,y){var m=this.x,b=this.y,g=this.z,_=u.x,C=u.y,x=u.z,w=u.w,O=w*m+C*g-x*b,T=w*b+x*m-_*g,R=w*g+_*b-C*m,A=-_*m-C*b-x*g;return y.x=O*w+A*-_+T*-x-R*-C,y.y=T*w+A*-C+R*-_-O*-x,y.z=R*w+A*-x+O*-C-T*-_,y},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.scaleInPlace=function(u){return this.x*=u,this.y*=u,this.z*=u,this},t.prototype.scale=function(u){return new t(this.x*u,this.y*u,this.z*u)},t.prototype.scaleToRef=function(u,y){return y.copyFromFloats(this.x*u,this.y*u,this.z*u)},t.prototype.scaleAndAddToRef=function(u,y){return y.addInPlaceFromFloats(this.x*u,this.y*u,this.z*u)},t.prototype.equals=function(u){return u&&this.x===u.x&&this.y===u.y&&this.z===u.z},t.prototype.equalsWithEpsilon=function(u,y){return void 0===y&&(y=g.Epsilon),u&&C.Scalar.WithinEpsilon(this.x,u.x,y)&&C.Scalar.WithinEpsilon(this.y,u.y,y)&&C.Scalar.WithinEpsilon(this.z,u.z,y)},t.prototype.equalsToFloats=function(u,y,m){return this.x===u&&this.y===y&&this.z===m},t.prototype.multiplyInPlace=function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z,this},t.prototype.multiply=function(u){return this.multiplyByFloats(u.x,u.y,u.z)},t.prototype.multiplyToRef=function(u,y){return y.copyFromFloats(this.x*u.x,this.y*u.y,this.z*u.z)},t.prototype.multiplyByFloats=function(u,y,m){return new t(this.x*u,this.y*y,this.z*m)},t.prototype.divide=function(u){return new t(this.x/u.x,this.y/u.y,this.z/u.z)},t.prototype.divideToRef=function(u,y){return y.copyFromFloats(this.x/u.x,this.y/u.y,this.z/u.z)},t.prototype.divideInPlace=function(u){return this.divideToRef(u,this)},t.prototype.minimizeInPlace=function(u){return this.minimizeInPlaceFromFloats(u.x,u.y,u.z)},t.prototype.maximizeInPlace=function(u){return this.maximizeInPlaceFromFloats(u.x,u.y,u.z)},t.prototype.minimizeInPlaceFromFloats=function(u,y,m){return u<this.x&&(this.x=u),y<this.y&&(this.y=y),m<this.z&&(this.z=m),this},t.prototype.maximizeInPlaceFromFloats=function(u,y,m){return u>this.x&&(this.x=u),y>this.y&&(this.y=y),m>this.z&&(this.z=m),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.normalizeFromLength=function(u){return 0===u||1===u?this:this.scaleInPlace(1/u)},t.prototype.normalizeToNew=function(){var u=new t(0,0,0);return this.normalizeToRef(u),u},t.prototype.normalizeToRef=function(u){var y=this.length();return 0===y||1===y?u.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/y,u)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.copyFrom=function(u){return this.copyFromFloats(u.x,u.y,u.z)},t.prototype.copyFromFloats=function(u,y,m){return this.x=u,this.y=y,this.z=m,this},t.prototype.set=function(u,y,m){return this.copyFromFloats(u,y,m)},t.prototype.setAll=function(u){return this.x=this.y=this.z=u,this},t}();y.Vector3=x},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__assign||function(){return(_=Object.assign||function(u){for(var y,m=1,b=arguments.length;m<b;m++)for(var g in y=arguments[m])Object.prototype.hasOwnProperty.call(y,g)&&(u[g]=y[g]);return u}).apply(this,arguments)},C=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var x,w=m(0),O=m(5),T=m(26),R=m(1),A=m(16);!function(u){u[u.TRANSFORM=1]="TRANSFORM",u[u.UUID_CALLBACK=8]="UUID_CALLBACK",u[u.BOX_SHAPE=16]="BOX_SHAPE",u[u.SPHERE_SHAPE=17]="SPHERE_SHAPE",u[u.PLANE_SHAPE=18]="PLANE_SHAPE",u[u.CONE_SHAPE=19]="CONE_SHAPE",u[u.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",u[u.TEXT_SHAPE=21]="TEXT_SHAPE",u[u.NFT_SHAPE=22]="NFT_SHAPE",u[u.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",u[u.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",u[u.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",u[u.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",u[u.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",u[u.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",u[u.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",u[u.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",u[u.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",u[u.BILLBOARD=32]="BILLBOARD",u[u.ANIMATION=33]="ANIMATION",u[u.FONT=34]="FONT",u[u.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",u[u.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",u[u.GLTF_SHAPE=54]="GLTF_SHAPE",u[u.OBJ_SHAPE=55]="OBJ_SHAPE",u[u.AVATAR_SHAPE=56]="AVATAR_SHAPE",u[u.BASIC_MATERIAL=64]="BASIC_MATERIAL",u[u.PBR_MATERIAL=65]="PBR_MATERIAL",u[u.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",u[u.SOUND=67]="SOUND",u[u.TEXTURE=68]="TEXTURE",u[u.VIDEO_CLIP=70]="VIDEO_CLIP",u[u.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",u[u.AUDIO_CLIP=200]="AUDIO_CLIP",u[u.AUDIO_SOURCE=201]="AUDIO_SOURCE",u[u.AUDIO_STREAM=202]="AUDIO_STREAM",u[u.GIZMOS=203]="GIZMOS",u[u.SMART_ITEM=204]="SMART_ITEM"}(x=y.CLASS_ID||(y.CLASS_ID={}));var E=function(u){function e(y){void 0===y&&(y={});var m=u.call(this)||this;return m.position=y.position||O.Vector3.Zero(),m.rotation=y.rotation||O.Quaternion.Identity,m.scale=y.scale||new O.Vector3(1,1,1),m}return g(e,u),Object.defineProperty(e.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!0,configurable:!0}),e.prototype.lookAt=function(u,y){void 0===y&&(y=O.MathTmp.staticUp);var m=new O.Matrix;return O.Matrix.LookAtLHToRef(this.position,u,y,m),m.invert(),O.Quaternion.FromRotationMatrixToRef(m,this.rotation),this},e.prototype.rotate=function(u,y){return this.rotation.multiplyInPlace(this.rotation.angleAxis(y,u)),this},e.prototype.translate=function(u){return this.position.addInPlace(u),this},C([w.ObservableComponent.field],e.prototype,"position",void 0),C([w.ObservableComponent.field],e.prototype,"rotation",void 0),C([w.ObservableComponent.field],e.prototype,"scale",void 0),C([w.Component("engine.transform",x.TRANSFORM)],e)}(w.ObservableComponent);y.Transform=E;var P=function(u){function e(y,m,b){void 0===y&&(y=!0),void 0===m&&(m=!0),void 0===b&&(b=!0);var g=u.call(this)||this;return g.x=!0,g.y=!0,g.z=!0,g.x=y,g.y=m,g.z=b,g}return g(e,u),C([w.ObservableComponent.field],e.prototype,"x",void 0),C([w.ObservableComponent.field],e.prototype,"y",void 0),C([w.ObservableComponent.field],e.prototype,"z",void 0),C([w.Component("engine.billboard",x.BILLBOARD)],e)}(w.ObservableComponent);y.Billboard=P;var S=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.withCollisions=!0,y.isPointerBlocker=!0,y.visible=!0,y}return g(e,u),C([w.ObservableComponent.field],e.prototype,"withCollisions",void 0),C([w.ObservableComponent.field],e.prototype,"isPointerBlocker",void 0),C([w.ObservableComponent.field],e.prototype,"visible",void 0),e}(w.ObservableComponent);y.Shape=S;var I=function(u){function e(){return null!==u&&u.apply(this,arguments)||this}return g(e,u),C([w.DisposableComponent("engine.shape",x.BOX_SHAPE)],e)}(S);y.BoxShape=I;var z=function(u){function e(){return null!==u&&u.apply(this,arguments)||this}return g(e,u),C([w.DisposableComponent("engine.shape",x.SPHERE_SHAPE)],e)}(S);y.SphereShape=z;var M=function(u){function e(){return null!==u&&u.apply(this,arguments)||this}return g(e,u),C([w.ObservableComponent.field],e.prototype,"segments",void 0),C([w.ObservableComponent.field],e.prototype,"arc",void 0),C([w.DisposableComponent("engine.shape",x.CIRCLE_SHAPE)],e)}(S);y.CircleShape=M;var F=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.width=1,y.height=1,y}return g(e,u),C([w.ObservableComponent.field],e.prototype,"width",void 0),C([w.ObservableComponent.field],e.prototype,"height",void 0),C([w.ObservableComponent.field],e.prototype,"uvs",void 0),C([w.DisposableComponent("engine.shape",x.PLANE_SHAPE)],e)}(S);y.PlaneShape=F;var D=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.radiusTop=0,y.radiusBottom=1,y.segmentsHeight=1,y.segmentsRadial=36,y.openEnded=!1,y.radius=null,y.arc=360,y}return g(e,u),C([w.ObservableComponent.field],e.prototype,"radiusTop",void 0),C([w.ObservableComponent.field],e.prototype,"radiusBottom",void 0),C([w.ObservableComponent.field],e.prototype,"segmentsHeight",void 0),C([w.ObservableComponent.field],e.prototype,"segmentsRadial",void 0),C([w.ObservableComponent.field],e.prototype,"openEnded",void 0),C([w.ObservableComponent.field],e.prototype,"radius",void 0),C([w.ObservableComponent.field],e.prototype,"arc",void 0),C([w.DisposableComponent("engine.shape",x.CONE_SHAPE)],e)}(S);y.ConeShape=D;var U=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.radiusTop=0,y.radiusBottom=1,y.segmentsHeight=1,y.segmentsRadial=36,y.openEnded=!1,y.radius=null,y.arc=360,y}return g(e,u),C([w.ObservableComponent.field],e.prototype,"radiusTop",void 0),C([w.ObservableComponent.field],e.prototype,"radiusBottom",void 0),C([w.ObservableComponent.field],e.prototype,"segmentsHeight",void 0),C([w.ObservableComponent.field],e.prototype,"segmentsRadial",void 0),C([w.ObservableComponent.field],e.prototype,"openEnded",void 0),C([w.ObservableComponent.field],e.prototype,"radius",void 0),C([w.ObservableComponent.field],e.prototype,"arc",void 0),C([w.DisposableComponent("engine.shape",x.CYLINDER_SHAPE)],e)}(S);y.CylinderShape=U;var L,N=function(u){function e(y){var m=u.call(this)||this;return m.src=y,m}return g(e,u),C([S.readonly],e.prototype,"src",void 0),C([w.DisposableComponent("engine.shape",x.GLTF_SHAPE)],e)}(S);y.GLTFShape=N,function(u){u[u.Classic=0]="Classic",u[u.Baroque_Ornament=1]="Baroque_Ornament",u[u.Diamond_Ornament=2]="Diamond_Ornament",u[u.Minimal_Wide=3]="Minimal_Wide",u[u.Minimal_Grey=4]="Minimal_Grey",u[u.Blocky=5]="Blocky",u[u.Gold_Edges=6]="Gold_Edges",u[u.Gold_Carved=7]="Gold_Carved",u[u.Gold_Wide=8]="Gold_Wide",u[u.Gold_Rounded=9]="Gold_Rounded",u[u.Metal_Medium=10]="Metal_Medium",u[u.Metal_Wide=11]="Metal_Wide",u[u.Metal_Slim=12]="Metal_Slim",u[u.Metal_Rounded=13]="Metal_Rounded",u[u.Pins=14]="Pins",u[u.Minimal_Black=15]="Minimal_Black",u[u.Minimal_White=16]="Minimal_White",u[u.Tape=17]="Tape",u[u.Wood_Slim=18]="Wood_Slim",u[u.Wood_Wide=19]="Wood_Wide",u[u.Wood_Twigs=20]="Wood_Twigs",u[u.Canvas=21]="Canvas"}(L=y.PictureFrameStyle||(y.PictureFrameStyle={}));var j=function(u){function e(y,m){void 0===m&&(m={});var b=u.call(this)||this;b.src=y;var g=new O.Color3(.6404918,.611472,.8584906),_=L.Classic;return m instanceof O.Color3?g=m:null!=m&&(m.color&&(g=m.color),m.style&&(_=m.style)),b.color=g,b.style=_,b}return g(e,u),C([S.readonly],e.prototype,"src",void 0),C([S.readonly],e.prototype,"style",void 0),C([w.ObservableComponent.field],e.prototype,"color",void 0),C([w.DisposableComponent("engine.shape",x.NFT_SHAPE)],e)}(S);y.NFTShape=j;var V=function(u){function e(y,m){var b=u.call(this)||this;if(b.src=y,m)for(var g in m)b[g]=m[g];return b}return g(e,u),C([w.ObservableComponent.readonly],e.prototype,"src",void 0),C([w.ObservableComponent.readonly],e.prototype,"samplingMode",void 0),C([w.ObservableComponent.readonly],e.prototype,"wrap",void 0),C([w.ObservableComponent.readonly],e.prototype,"hasAlpha",void 0),C([w.DisposableComponent("engine.texture",x.TEXTURE)],e)}(w.ObservableComponent);y.Texture=V;var H=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.states=[],y}return g(e,u),e.prototype.addClip=function(u){var y=this;return this.states.push(u),u.onChange((function(){y.dirty=!0})),this},e.prototype.getClip=function(u){for(var y=0;y<this.states.length;y++){var m=this.states[y];if(m.clip===u)return m}var b=new T.AnimationState(u);return this.addClip(b),b},C([w.ObservableComponent.readonly],e.prototype,"states",void 0),C([w.Component("engine.animator",x.ANIMATION)],e)}(S);y.Animator=H;var k=function(u){function e(y){var m=u.call(this)||this;return m.src=y,m}return g(e,u),C([w.ObservableComponent.readonly],e.prototype,"src",void 0),C([w.DisposableComponent("engine.shape",x.OBJ_SHAPE)],e)}(S);y.OBJShape=k;var B=function(u){function e(y){void 0===y&&(y="");var m=u.call(this)||this;return m.src=y,m}return g(e,u),C([w.ObservableComponent.readonly],e.prototype,"src",void 0),C([w.DisposableComponent("engine.font",x.FONT)],e)}(w.ObservableComponent);y.Font=B,function(u){u.SanFrancisco="builtin:SF-UI-Text-Regular SDF",u.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",u.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",u.LiberationSans="builtin:LiberationSans SDF"}(y.Fonts||(y.Fonts={}));var G,W=function(u){function e(y){var m=u.call(this)||this;return m.outlineWidth=0,m.outlineColor=new O.Color3(1,1,1),m.color=new O.Color3(1,1,1),m.fontSize=10,m.fontWeight="normal",m.opacity=1,m.value="",m.lineSpacing="0px",m.lineCount=0,m.resizeToFit=!1,m.textWrapping=!1,m.shadowBlur=0,m.shadowOffsetX=0,m.shadowOffsetY=0,m.shadowColor=new O.Color3(1,1,1),m.zIndex=0,m.hTextAlign="center",m.vTextAlign="center",m.width=1,m.height=1,m.paddingTop=0,m.paddingRight=0,m.paddingBottom=0,m.paddingLeft=0,m.isPickable=!1,m.billboard=!1,y&&(m.value=y),m}return g(e,u),C([w.ObservableComponent.field],e.prototype,"outlineWidth",void 0),C([w.ObservableComponent.field],e.prototype,"outlineColor",void 0),C([w.ObservableComponent.field],e.prototype,"color",void 0),C([w.ObservableComponent.field],e.prototype,"fontSize",void 0),C([w.ObservableComponent.field],e.prototype,"fontWeight",void 0),C([w.ObservableComponent.component],e.prototype,"font",void 0),C([w.ObservableComponent.field],e.prototype,"opacity",void 0),C([w.ObservableComponent.field],e.prototype,"value",void 0),C([w.ObservableComponent.field],e.prototype,"lineSpacing",void 0),C([w.ObservableComponent.field],e.prototype,"lineCount",void 0),C([w.ObservableComponent.field],e.prototype,"resizeToFit",void 0),C([w.ObservableComponent.field],e.prototype,"textWrapping",void 0),C([w.ObservableComponent.field],e.prototype,"shadowBlur",void 0),C([w.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),C([w.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),C([w.ObservableComponent.field],e.prototype,"shadowColor",void 0),C([w.ObservableComponent.field],e.prototype,"zIndex",void 0),C([w.ObservableComponent.field],e.prototype,"hTextAlign",void 0),C([w.ObservableComponent.field],e.prototype,"vTextAlign",void 0),C([w.ObservableComponent.field],e.prototype,"width",void 0),C([w.ObservableComponent.field],e.prototype,"height",void 0),C([w.ObservableComponent.field],e.prototype,"paddingTop",void 0),C([w.ObservableComponent.field],e.prototype,"paddingRight",void 0),C([w.ObservableComponent.field],e.prototype,"paddingBottom",void 0),C([w.ObservableComponent.field],e.prototype,"paddingLeft",void 0),C([w.ObservableComponent.field],e.prototype,"isPickable",void 0),C([w.ObservableComponent.field],e.prototype,"billboard",void 0),C([w.Component("engine.text",x.TEXT_SHAPE)],e)}(S);y.TextShape=W,function(u){u[u.OPAQUE=0]="OPAQUE",u[u.ALPHA_TEST=1]="ALPHA_TEST",u[u.ALPHA_BLEND=2]="ALPHA_BLEND",u[u.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",u[u.AUTO=4]="AUTO"}(G=y.TransparencyMode||(y.TransparencyMode={}));var q=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.alphaTest=.5,y.transparencyMode=G.AUTO,y}return g(e,u),C([w.ObservableComponent.field],e.prototype,"alphaTest",void 0),C([w.ObservableComponent.field],e.prototype,"albedoColor",void 0),C([w.ObservableComponent.field],e.prototype,"emissiveColor",void 0),C([w.ObservableComponent.field],e.prototype,"metallic",void 0),C([w.ObservableComponent.field],e.prototype,"roughness",void 0),C([w.ObservableComponent.field],e.prototype,"ambientColor",void 0),C([w.ObservableComponent.field],e.prototype,"reflectionColor",void 0),C([w.ObservableComponent.field],e.prototype,"reflectivityColor",void 0),C([w.ObservableComponent.field],e.prototype,"directIntensity",void 0),C([w.ObservableComponent.field],e.prototype,"microSurface",void 0),C([w.ObservableComponent.field],e.prototype,"emissiveIntensity",void 0),C([w.ObservableComponent.field],e.prototype,"environmentIntensity",void 0),C([w.ObservableComponent.field],e.prototype,"specularIntensity",void 0),C([w.ObservableComponent.component],e.prototype,"albedoTexture",void 0),C([w.ObservableComponent.component],e.prototype,"alphaTexture",void 0),C([w.ObservableComponent.component],e.prototype,"emissiveTexture",void 0),C([w.ObservableComponent.component],e.prototype,"bumpTexture",void 0),C([w.ObservableComponent.component],e.prototype,"refractionTexture",void 0),C([w.ObservableComponent.field],e.prototype,"disableLighting",void 0),C([w.ObservableComponent.field],e.prototype,"transparencyMode",void 0),C([w.DisposableComponent("engine.material",x.PBR_MATERIAL)],e)}(w.ObservableComponent);y.Material=q;var Y=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.alphaTest=.5,y}return g(e,u),C([w.ObservableComponent.component],e.prototype,"texture",void 0),C([w.ObservableComponent.field],e.prototype,"alphaTest",void 0),C([w.DisposableComponent("engine.material",x.BASIC_MATERIAL)],e)}(w.ObservableComponent);y.BasicMaterial=Y;var X=function(u){function e(y){var m=u.call(this)||this;if(m.uuid=R.newId("UUID"),!y||!("apply"in y)||!("call"in y))throw new Error("Callback is not a function");return m.callback=y,m}return g(e,u),e.uuidEvent=function(u,y){if(delete u[y]){var m=y+"_"+Math.random();u[m]=void 0,Object.defineProperty(u,m,_(_({},Object.getOwnPropertyDescriptor(u,m)),{enumerable:!1})),Object.defineProperty(u,y.toString(),{get:function(){return this[m]},set:function(u){var b=this[m];if(u){if(!(u instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[y]=u.uuid}else this.data[y]=null;if(this[m]=u,u!==b){this.dirty=!0;for(var g=0;g<this.subscriptions.length;g++)this.subscriptions[g](y,u,b)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},C([w.ObservableComponent.field],e.prototype,"callback",void 0),e}(w.ObservableComponent);y.OnUUIDEvent=X;var Z=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.button=A.ActionButton.ANY,y.hoverText="Interact",y.distance=10,y.showFeedback=!0,y}return g(e,u),e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},C([w.ObservableComponent.field],e.prototype,"button",void 0),C([w.ObservableComponent.field],e.prototype,"hoverText",void 0),C([w.ObservableComponent.field],e.prototype,"distance",void 0),C([w.ObservableComponent.field],e.prototype,"showFeedback",void 0),e}(X);y.OnPointerUUIDEvent=Z;var Q=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.type="onPointerLock",y}return g(e,u),C([w.ObservableComponent.readonly],e.prototype,"type",void 0),C([w.Component("engine.onPointerLock",x.UUID_CALLBACK)],e)}(X);y.OnPointerLock=Q;var J=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.type="onAnimationEnd",y}return g(e,u),C([w.ObservableComponent.readonly],e.prototype,"type",void 0),C([w.Component("engine.onAnimationEnd",x.UUID_CALLBACK)],e)}(X);y.OnAnimationEnd=J;var K=function(u){function e(){return null!==u&&u.apply(this,arguments)||this}return g(e,u),C([w.Component("engine.smartItem",x.SMART_ITEM)],e)}(w.ObservableComponent);y.SmartItem=K;var $=function(u){function e(y){var m=u.call(this)||this;return m.url=y,m}return g(e,u),C([w.ObservableComponent.readonly],e.prototype,"url",void 0),C([w.DisposableComponent("engine.VideoClip",x.VIDEO_CLIP)],e)}(w.ObservableComponent);y.VideoClip=$;var tt=function(u){function e(y,m){var b=u.call(this)||this;if(b.volume=1,b.playbackRate=1,b.loop=!1,b.seek=-1,b.playing=!1,!(y instanceof $))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(b.videoClipId=w.getComponentId(y),m)for(var g in m)b[g]=m[g];return b}return g(e,u),e.prototype.play=function(){this.playing=!0},e.prototype.pause=function(){this.playing=!1},e.prototype.reset=function(){this.seekTime(0)},e.prototype.seekTime=function(u){this.seek=u,this.dirty=!0,this.data.nonce=Math.random()},e.prototype.toJSON=function(){if(this.seek<0)return u.prototype.toJSON.call(this);var y=JSON.parse(JSON.stringify(u.prototype.toJSON.call(this)));return this.seek=-1,y},C([w.ObservableComponent.readonly],e.prototype,"videoClipId",void 0),C([w.ObservableComponent.readonly],e.prototype,"samplingMode",void 0),C([w.ObservableComponent.readonly],e.prototype,"wrap",void 0),C([w.ObservableComponent.field],e.prototype,"volume",void 0),C([w.ObservableComponent.field],e.prototype,"playbackRate",void 0),C([w.ObservableComponent.field],e.prototype,"loop",void 0),C([w.ObservableComponent.field],e.prototype,"seek",void 0),C([w.ObservableComponent.field],e.prototype,"playing",void 0),C([w.DisposableComponent("engine.VideoTexture",x.VIDEO_TEXTURE)],e)}(w.ObservableComponent);y.VideoTexture=tt},function(u,y,m){"use strict";function o(u){for(var m in u)y.hasOwnProperty(m)||(y[m]=u[m])}Object.defineProperty(y,"__esModule",{value:!0}),o(m(2)),o(m(9)),o(m(22)),o(m(23)),o(m(36)),o(m(37)),o(m(38)),o(m(24)),o(m(39)),o(m(40)),o(m(11)),o(m(41)),o(m(42)),o(m(25)),o(m(10)),o(m(6)),o(m(43)),o(m(15)),o(m(3)),o(m(21)),o(m(5))},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=function(){function t(){}return t.WithinEpsilon=function(u,y,m){void 0===m&&(m=1401298e-51);var b=u-y;return-m<=b&&b<=m},t.ToHex=function(u){var y=u.toString(16);return u<=15?("0"+y).toUpperCase():y.toUpperCase()},t.Sign=function(u){var y=+u;return 0===y||isNaN(y)?y:y>0?1:-1},t.Clamp=function(u,y,m){return void 0===y&&(y=0),void 0===m&&(m=1),Math.min(m,Math.max(y,u))},t.Log2=function(u){return Math.log(u)*Math.LOG2E},t.Repeat=function(u,y){return u-Math.floor(u/y)*y},t.Normalize=function(u,y,m){return(u-y)/(m-y)},t.Denormalize=function(u,y,m){return u*(m-y)+y},t.DeltaAngle=function(u,y){var m=t.Repeat(y-u,360);return m>180&&(m-=360),m},t.PingPong=function(u,y){var m=t.Repeat(u,2*y);return y-Math.abs(m-y)},t.SmoothStep=function(u,y,m){var b=t.Clamp(m);return y*(b=-2*b*b*b+3*b*b)+u*(1-b)},t.MoveTowards=function(u,y,m){return Math.abs(y-u)<=m?y:u+t.Sign(y-u)*m},t.MoveTowardsAngle=function(u,y,m){var b=t.DeltaAngle(u,y);return-m<b&&b<m?y:t.MoveTowards(u,u+b,m)},t.Lerp=function(u,y,m){return u+(y-u)*m},t.LerpAngle=function(u,y,m){var b=t.Repeat(y-u,360);return b>180&&(b-=360),u+b*t.Clamp(m)},t.InverseLerp=function(u,y,m){return u!==y?t.Clamp((m-u)/(y-u)):0},t.Hermite=function(u,y,m,b,g){var _=g*g,C=g*_;return u*(2*C-3*_+1)+m*(-2*C+3*_)+y*(C-2*_+g)+b*(C-_)},t.RandomRange=function(u,y){return u===y?u:Math.random()*(y-u)+u},t.RangeToPercent=function(u,y,m){return(u-y)/(m-y)},t.PercentToRange=function(u,y,m){return(m-y)*u+y},t.NormalizeRadians=function(u){return u-t.TwoPi*Math.floor((u+Math.PI)/t.TwoPi)},t.TwoPi=2*Math.PI,t}();y.Scalar=b},function(u,y,m){"use strict";var b=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var g=m(8),_=b([g.EventConstructor()],(function(u,y,m){this.entity=u,this.componentName=y,this.component=m}));y.ComponentRemoved=_;var C=b([g.EventConstructor()],(function(u,y,m){this.entity=u,this.componentName=y,this.classId=m}));y.ComponentAdded=C;var x=b([g.EventConstructor()],(function(u,y){this.entity=u,this.parent=y}));y.ParentChanged=x},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(1),g=[];function i(u){if(!("__event_name__"in u)||"string"!=typeof u.__event_name__)throw new Error("The EventConstructor is not registered");return u.__event_name__}var _=function(){function t(){this.listeners={}}return t.prototype.addListener=function(u,y,m){if(!u||"function"!=typeof u)throw new Error("Invalid EventConstructor");var b=i(u),g=this.listeners[b];g||(g=this.listeners[b]=[]);for(var _=0;_<g.length;_++)if(g[_].listener===y)throw new Error("The provided listener is already registered");return g.push({listener:y,fn:m}),this},t.prototype.removeListener=function(u,y){if(!y||"function"!=typeof y)throw new Error("Invalid EventConstructor");var m=i(y),b=this.listeners[m];if(!b)return!1;for(var g=0;g<b.length;g++)if(b[g].listener===u)return b.splice(g,1),!0;return!1},t.prototype.fireEvent=function(u){var y=i(u.constructor),m=this.listeners[y];if(m)for(var g=0;g<m.length;g++)try{var _=m[g];_.fn.call(_.listener,u)}catch(u){b.error(u)}return this},t}();y.EventManager=_,y.EventConstructor=function(){var u=b.newId("EV");if(-1!==g.indexOf(u))throw new Error("The event name "+u+" is already taken");return g.push(u),function(y){return y.__event_name__=u,y}}},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(1),g=m(3),_=m(10),C=m(11);y.MathTmp={Vector3:b.buildArray(6,g.Vector3.Zero),Matrix:b.buildArray(2,C.Matrix.Identity),Quaternion:b.buildArray(3,_.Quaternion.Zero),staticUp:g.Vector3.Up(),tmpMatrix:C.Matrix.Zero()}},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(11),g=m(3),_=m(9),C=m(2),x=function(){function t(u,y,m,b){void 0===u&&(u=0),void 0===y&&(y=0),void 0===m&&(m=0),void 0===b&&(b=1),this.x=u,this.y=y,this.z=m,this.w=b}return t.FromRotationMatrix=function(u){var y=new t;return t.FromRotationMatrixToRef(u,y),y},t.FromRotationMatrixToRef=function(u,y){var m,b=u.m,g=b[0],_=b[4],C=b[8],x=b[1],w=b[5],O=b[9],T=b[2],R=b[6],A=b[10],E=g+w+A;E>0?(m=.5/Math.sqrt(E+1),y.w=.25/m,y.x=(R-O)*m,y.y=(C-T)*m,y.z=(x-_)*m):g>w&&g>A?(m=2*Math.sqrt(1+g-w-A),y.w=(R-O)/m,y.x=.25*m,y.y=(_+x)/m,y.z=(C+T)/m):w>A?(m=2*Math.sqrt(1+w-g-A),y.w=(C-T)/m,y.x=(_+x)/m,y.y=.25*m,y.z=(O+R)/m):(m=2*Math.sqrt(1+A-g-w),y.w=(x-_)/m,y.x=(C+T)/m,y.y=(O+R)/m,y.z=.25*m)},t.Dot=function(u,y){return u.x*y.x+u.y*y.y+u.z*y.z+u.w*y.w},t.AreClose=function(u,y){return t.Dot(u,y)>=0},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(u){return new t(-u.x,-u.y,-u.z,u.w)},t.IsIdentity=function(u){return u&&0===u.x&&0===u.y&&0===u.z&&1===u.w},t.RotationAxis=function(u,y){var m=y*C.DEG2RAD;return t.RotationAxisToRef(u,m,new t)},t.RotationAxisToRef=function(u,y,m){var b=y*C.DEG2RAD,g=Math.sin(b/2);return u.normalize(),m.w=Math.cos(b/2),m.x=u.x*g,m.y=u.y*g,m.z=u.z*g,m},t.FromArray=function(u,y){return void 0===y&&(y=0),new t(u[y],u[y+1],u[y+2],u[y+3])},t.FromEulerAnglesRef=function(u,y,m,b){return t.RotationYawPitchRollToRef(y*C.DEG2RAD,u*C.DEG2RAD,m*C.DEG2RAD,b)},t.RotationYawPitchRoll=function(u,y,m){var b=new t;return t.RotationYawPitchRollToRef(u,y,m,b),b},t.RotationYawPitchRollToRef=function(u,y,m,b){var g=.5*m,_=.5*y,C=.5*u,x=Math.cos(_),w=Math.cos(C),O=Math.cos(g),T=Math.sin(_),R=Math.sin(C),A=Math.sin(g);b.x=T*w*O+x*R*A,b.y=x*R*O-T*w*A,b.z=x*w*A+T*R*O,b.w=x*w*O-T*R*A},t.RotationAlphaBetaGamma=function(u,y,m){var b=new t;return t.RotationAlphaBetaGammaToRef(u,y,m,b),b},t.RotationAlphaBetaGammaToRef=function(u,y,m,b){var g=.5*(m+u),_=.5*(m-u),C=.5*y;b.x=Math.cos(_)*Math.sin(C),b.y=Math.sin(_)*Math.sin(C),b.z=Math.sin(g)*Math.cos(C),b.w=Math.cos(g)*Math.cos(C)},t.RotationQuaternionFromAxis=function(u,y,m){var b=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(u,y,m,b),b},t.RotationQuaternionFromAxisToRef=function(u,y,m,g){var C=_.MathTmp.Matrix[0];b.Matrix.FromXYZAxesToRef(u.normalize(),y.normalize(),m.normalize(),C),t.FromRotationMatrixToRef(C,g)},t.Slerp=function(u,y,m){var b=t.Identity;return t.SlerpToRef(u,y,m,b),b},t.SlerpToRef=function(u,y,m,b){var g,_,C=u.x*y.x+u.y*y.y+u.z*y.z+u.w*y.w,x=!1;if(C<0&&(x=!0,C=-C),C>.999999)_=1-m,g=x?-m:m;else{var w=Math.acos(C),O=1/Math.sin(w);_=Math.sin((1-m)*w)*O,g=x?-Math.sin(m*w)*O:Math.sin(m*w)*O}b.x=_*u.x+g*y.x,b.y=_*u.y+g*y.y,b.z=_*u.z+g*y.z,b.w=_*u.w+g*y.w},t.Hermite=function(u,y,m,b,g){var _=g*g,C=g*_,x=2*C-3*_+1,w=-2*C+3*_,O=C-2*_+g,T=C-_;return new t(u.x*x+m.x*w+y.x*O+b.x*T,u.y*x+m.y*w+y.y*O+b.y*T,u.z*x+m.z*w+y.z*O+b.z*T,u.w*x+m.w*w+y.w*O+b.w*T)},Object.defineProperty(t,"Identity",{get:function(){return new t(0,0,0,1)},enumerable:!0,configurable:!0}),t.Angle=function(u,y){var m=t.Dot(u,y);return 2*Math.acos(Math.min(Math.abs(m),1))*C.RAD2DEG},t.Euler=function(u,y,m){return t.RotationYawPitchRoll(y*C.DEG2RAD,u*C.DEG2RAD,m*C.DEG2RAD)},t.LookRotation=function(u,y){void 0===y&&(y=_.MathTmp.staticUp);var m=g.Vector3.Normalize(u),b=g.Vector3.Normalize(g.Vector3.Cross(y,m)),C=g.Vector3.Cross(m,b),x=b.x,w=b.y,O=b.z,T=C.x,R=C.y,A=C.z,E=m.x,P=m.y,S=m.z,I=x+R+S,z=new t;if(I>0){var M=Math.sqrt(I+1);return z.w=.5*M,M=.5/M,z.x=(A-P)*M,z.y=(E-O)*M,z.z=(w-T)*M,z}if(x>=R&&x>=S){var F=Math.sqrt(1+x-R-S),D=.5/F;return z.x=.5*F,z.y=(w+T)*D,z.z=(O+E)*D,z.w=(A-P)*D,z}if(R>S){var U=Math.sqrt(1+R-x-S),L=.5/U;return z.x=(T+w)*L,z.y=.5*U,z.z=(P+A)*L,z.w=(E-O)*L,z}var N=Math.sqrt(1+S-x-R),j=.5/N;return z.x=(E+O)*j,z.y=(P+A)*j,z.z=.5*N,z.w=(w-T)*j,z},t.RotateTowards=function(u,y,m){var b=t.Angle(u,y);if(0===b)return y;var g=Math.min(1,m/b);return t.Slerp(u,y,g)},t.FromToRotation=function(u,y){var m=new t,b=u.normalize(),_=y.normalize(),x=g.Vector3.Dot(b,_);if(x>-1+C.Epsilon){var w=Math.sqrt(2*(1+x)),O=1/w,T=g.Vector3.Cross(b,_).scaleInPlace(O);m.set(T.x,T.y,T.z,.5*w)}else{if(x>1-C.Epsilon)return new t(0,0,0,1);var R=g.Vector3.Cross(g.Vector3.Right(),b);R.lengthSquared()<C.Epsilon&&(R=g.Vector3.Cross(g.Vector3.Forward(),b)),m.set(R.x,R.y,R.z,0)}return m.normalize()},Object.defineProperty(t.prototype,"normalized",{get:function(){return this.normalize()},enumerable:!0,configurable:!0}),t.prototype.setFromToRotation=function(u,y,m){void 0===m&&(m=_.MathTmp.staticUp),_.MathTmp.tmpMatrix=b.Matrix.Zero(),b.Matrix.LookAtLHToRef(u,y,m,_.MathTmp.tmpMatrix),_.MathTmp.tmpMatrix.invert(),t.FromRotationMatrixToRef(_.MathTmp.tmpMatrix,this)},Object.defineProperty(t.prototype,"eulerAngles",{get:function(){var u=new g.Vector3,y=new b.Matrix;this.toRotationMatrix(y);var m=b.Matrix.GetAsMatrix3x3(y);return u.y=C.RAD2DEG*Math.asin(Math.max(-1,Math.min(1,m[6]))),Math.abs(m[6])<.99999?(u.x=C.RAD2DEG*Math.atan2(-m[7],m[8]),u.z=C.RAD2DEG*Math.atan2(-m[3],m[0])):(u.x=C.RAD2DEG*Math.atan2(m[5],m[4]),u.z=0),u},set:function(u){this.setEuler(u.x,u.y,u.z)},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var u=this.x||0;return 397*(u=397*(u=397*u^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},t.prototype.equals=function(u){return u&&this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(u){return this.x=u.x,this.y=u.y,this.z=u.z,this.w=u.w,this},t.prototype.copyFromFloats=function(u,y,m,b){return this.x=u,this.y=y,this.z=m,this.w=b,this},t.prototype.set=function(u,y,m,b){return this.copyFromFloats(u,y,m,b)},t.prototype.setEuler=function(u,y,m){return t.RotationYawPitchRollToRef(y*C.DEG2RAD,u*C.DEG2RAD,m*C.DEG2RAD,this),this},t.prototype.add=function(u){return new t(this.x+u.x,this.y+u.y,this.z+u.z,this.w+u.w)},t.prototype.addInPlace=function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z,this.w+=u.w,this},t.prototype.subtract=function(u){return new t(this.x-u.x,this.y-u.y,this.z-u.z,this.w-u.w)},t.prototype.scale=function(u){return new t(this.x*u,this.y*u,this.z*u,this.w*u)},t.prototype.scaleToRef=function(u,y){return y.x=this.x*u,y.y=this.y*u,y.z=this.z*u,y.w=this.w*u,this},t.prototype.scaleInPlace=function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},t.prototype.scaleAndAddToRef=function(u,y){return y.x+=this.x*u,y.y+=this.y*u,y.z+=this.z*u,y.w+=this.w*u,this},t.prototype.multiply=function(u){var y=new t(0,0,0,1);return this.multiplyToRef(u,y),y},t.prototype.multiplyToRef=function(u,y){var m=this.x*u.w+this.y*u.z-this.z*u.y+this.w*u.x,b=-this.x*u.z+this.y*u.w+this.z*u.x+this.w*u.y,g=this.x*u.y-this.y*u.x+this.z*u.w+this.w*u.z,_=-this.x*u.x-this.y*u.y-this.z*u.z+this.w*u.w;return y.copyFromFloats(m,b,g,_),this},t.prototype.multiplyInPlace=function(u){return this.multiplyToRef(u,this),this},t.prototype.conjugateToRef=function(u){return u.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this.x,-this.y,-this.z,this.w)},t.prototype.normalize=function(){var u=1/this.length;return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},t.prototype.angleAxis=function(u,y){if(0===y.lengthSquared())return t.Identity;var m=t.Identity,b=u*C.DEG2RAD;b*=.5;var g=y.normalize();return g=y.scaleInPlace(Math.sin(b)),m.x=g.x,m.y=g.y,m.z=g.z,m.w=Math.cos(b),m.normalize()},t.prototype.toRotationMatrix=function(u){return b.Matrix.FromQuaternionToRef(this,u),this},t.prototype.fromRotationMatrix=function(u){return t.FromRotationMatrixToRef(u,this),this},t}();y.Quaternion=x},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(3),g=m(10),_=m(9),C=m(21),x=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}return Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._identityReadOnly},enumerable:!0,configurable:!0}),t.FromArray=function(u,y){void 0===y&&(y=0);var m=new t;return t.FromArrayToRef(u,y,m),m},t.FromArrayToRef=function(u,y,m){for(var b=0;b<16;b++)m._m[b]=u[b+y];m._markAsUpdated()},t.FromFloatArrayToRefScaled=function(u,y,m,b){for(var g=0;g<16;g++)b._m[g]=u[g+y]*m;b._markAsUpdated()},t.FromValuesToRef=function(u,y,m,b,g,_,C,x,w,O,T,R,A,E,P,S,I){var z=I._m;z[0]=u,z[1]=y,z[2]=m,z[3]=b,z[4]=g,z[5]=_,z[6]=C,z[7]=x,z[8]=w,z[9]=O,z[10]=T,z[11]=R,z[12]=A,z[13]=E,z[14]=P,z[15]=S,I._markAsUpdated()},t.FromValues=function(u,y,m,b,g,_,C,x,w,O,T,R,A,E,P,S){var I=new t,z=I._m;return z[0]=u,z[1]=y,z[2]=m,z[3]=b,z[4]=g,z[5]=_,z[6]=C,z[7]=x,z[8]=w,z[9]=O,z[10]=T,z[11]=R,z[12]=A,z[13]=E,z[14]=P,z[15]=S,I._markAsUpdated(),I},t.Compose=function(u,y,m){var b=new t;return t.ComposeToRef(u,y,m,b),b},t.ComposeToRef=function(u,y,m,b){t.ScalingToRef(u.x,u.y,u.z,_.MathTmp.Matrix[1]),y.toRotationMatrix(_.MathTmp.Matrix[0]),_.MathTmp.Matrix[1].multiplyToRef(_.MathTmp.Matrix[0],b),b.setTranslation(m)},t.Identity=function(){var u=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return u._updateIdentityStatus(!0),u},t.IdentityToRef=function(u){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,u),u._updateIdentityStatus(!0)},t.Zero=function(){var u=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return u._updateIdentityStatus(!1),u},t.RotationX=function(u){var y=new t;return t.RotationXToRef(u,y),y},t.Invert=function(u){var y=new t;return u.invertToRef(y),y},t.RotationXToRef=function(u,y){var m=Math.sin(u),b=Math.cos(u);t.FromValuesToRef(1,0,0,0,0,b,m,0,0,-m,b,0,0,0,0,1,y),y._updateIdentityStatus(1===b&&0===m)},t.RotationY=function(u){var y=new t;return t.RotationYToRef(u,y),y},t.RotationYToRef=function(u,y){var m=Math.sin(u),b=Math.cos(u);t.FromValuesToRef(b,0,-m,0,0,1,0,0,m,0,b,0,0,0,0,1,y),y._updateIdentityStatus(1===b&&0===m)},t.RotationZ=function(u){var y=new t;return t.RotationZToRef(u,y),y},t.RotationZToRef=function(u,y){var m=Math.sin(u),b=Math.cos(u);t.FromValuesToRef(b,m,0,0,-m,b,0,0,0,0,1,0,0,0,0,1,y),y._updateIdentityStatus(1===b&&0===m)},t.RotationAxis=function(u,y){var m=new t;return t.RotationAxisToRef(u,y,m),m},t.RotationAxisToRef=function(u,y,m){var b=Math.sin(-y),g=Math.cos(-y),_=1-g;u.normalize();var C=m._m;C[0]=u.x*u.x*_+g,C[1]=u.x*u.y*_-u.z*b,C[2]=u.x*u.z*_+u.y*b,C[3]=0,C[4]=u.y*u.x*_+u.z*b,C[5]=u.y*u.y*_+g,C[6]=u.y*u.z*_-u.x*b,C[7]=0,C[8]=u.z*u.x*_-u.y*b,C[9]=u.z*u.y*_+u.x*b,C[10]=u.z*u.z*_+g,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,m._markAsUpdated()},t.RotationYawPitchRoll=function(u,y,m){var b=new t;return t.RotationYawPitchRollToRef(u,y,m,b),b},t.RotationYawPitchRollToRef=function(u,y,m,b){g.Quaternion.RotationYawPitchRollToRef(u,y,m,_.MathTmp.Quaternion[0]),_.MathTmp.Quaternion[0].toRotationMatrix(b)},t.Scaling=function(u,y,m){var b=new t;return t.ScalingToRef(u,y,m,b),b},t.ScalingToRef=function(u,y,m,b){t.FromValuesToRef(u,0,0,0,0,y,0,0,0,0,m,0,0,0,0,1,b),b._updateIdentityStatus(1===u&&1===y&&1===m)},t.Translation=function(u,y,m){var b=new t;return t.TranslationToRef(u,y,m,b),b},t.TranslationToRef=function(u,y,m,b){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,u,y,m,1,b),b._updateIdentityStatus(0===u&&0===y&&0===m)},t.Lerp=function(u,y,m){var b=new t;return t.LerpToRef(u,y,m,b),b},t.LerpToRef=function(u,y,m,b){for(var g=0;g<16;g++)b._m[g]=u._m[g]*(1-m)+y._m[g]*m;b._markAsUpdated()},t.DecomposeLerp=function(u,y,m){var b=new t;return t.DecomposeLerpToRef(u,y,m,b),b},t.DecomposeLerpToRef=function(u,y,m,C){var x=_.MathTmp.Vector3[0],w=_.MathTmp.Quaternion[0],O=_.MathTmp.Vector3[1];u.decompose(x,w,O);var T=_.MathTmp.Vector3[2],R=_.MathTmp.Quaternion[1],A=_.MathTmp.Vector3[3];y.decompose(T,R,A);var E=_.MathTmp.Vector3[4];b.Vector3.LerpToRef(x,T,m,E);var P=_.MathTmp.Quaternion[2];g.Quaternion.SlerpToRef(w,R,m,P);var S=_.MathTmp.Vector3[5];b.Vector3.LerpToRef(O,A,m,S),t.ComposeToRef(E,P,S,C)},t.LookAtLH=function(u,y,m){var b=new t;return t.LookAtLHToRef(u,y,m,b),b},t.LookAtLHToRef=function(u,y,m,g){var C=_.MathTmp.Vector3[0],x=_.MathTmp.Vector3[1],w=_.MathTmp.Vector3[2];y.subtractToRef(u,w),w.normalize(),b.Vector3.CrossToRef(m,w,C);var O=C.lengthSquared();0===O?C.x=1:C.normalizeFromLength(Math.sqrt(O)),b.Vector3.CrossToRef(w,C,x),x.normalize();var T=-b.Vector3.Dot(C,u),R=-b.Vector3.Dot(x,u),A=-b.Vector3.Dot(w,u);t.FromValuesToRef(C.x,x.x,w.x,0,C.y,x.y,w.y,0,C.z,x.z,w.z,0,T,R,A,1,g)},t.LookAtRH=function(u,y,m){var b=new t;return t.LookAtRHToRef(u,y,m,b),b},t.LookAtRHToRef=function(u,y,m,g){var C=_.MathTmp.Vector3[0],x=_.MathTmp.Vector3[1],w=_.MathTmp.Vector3[2];u.subtractToRef(y,w),w.normalize(),b.Vector3.CrossToRef(m,w,C);var O=C.lengthSquared();0===O?C.x=1:C.normalizeFromLength(Math.sqrt(O)),b.Vector3.CrossToRef(w,C,x),x.normalize();var T=-b.Vector3.Dot(C,u),R=-b.Vector3.Dot(x,u),A=-b.Vector3.Dot(w,u);t.FromValuesToRef(C.x,x.x,w.x,0,C.y,x.y,w.y,0,C.z,x.z,w.z,0,T,R,A,1,g)},t.OrthoLH=function(u,y,m,b){var g=new t;return t.OrthoLHToRef(u,y,m,b,g),g},t.OrthoLHToRef=function(u,y,m,b,g){var _=2/u,C=2/y,x=2/(b-m),w=-(b+m)/(b-m);t.FromValuesToRef(_,0,0,0,0,C,0,0,0,0,x,0,0,0,w,1,g),g._updateIdentityStatus(1===_&&1===C&&1===x&&0===w)},t.OrthoOffCenterLH=function(u,y,m,b,g,_){var C=new t;return t.OrthoOffCenterLHToRef(u,y,m,b,g,_,C),C},t.OrthoOffCenterLHToRef=function(u,y,m,b,g,_,C){var x=2/(y-u),w=2/(b-m),O=2/(_-g),T=-(_+g)/(_-g),R=(u+y)/(u-y),A=(b+m)/(m-b);t.FromValuesToRef(x,0,0,0,0,w,0,0,0,0,O,0,R,A,T,1,C),C._markAsUpdated()},t.OrthoOffCenterRH=function(u,y,m,b,g,_){var C=new t;return t.OrthoOffCenterRHToRef(u,y,m,b,g,_,C),C},t.OrthoOffCenterRHToRef=function(u,y,m,b,g,_,C){t.OrthoOffCenterLHToRef(u,y,m,b,g,_,C),C._m[10]*=-1},t.PerspectiveLH=function(u,y,m,b){var g=new t,_=2*m/u,C=2*m/y,x=(b+m)/(b-m),w=-2*b*m/(b-m);return t.FromValuesToRef(_,0,0,0,0,C,0,0,0,0,x,1,0,0,w,0,g),g._updateIdentityStatus(!1),g},t.PerspectiveFovLH=function(u,y,m,b){var g=new t;return t.PerspectiveFovLHToRef(u,y,m,b,g),g},t.PerspectiveFovLHToRef=function(u,y,m,b,g,_){void 0===_&&(_=!0);var C=m,x=b,w=1/Math.tan(.5*u),O=_?w/y:w,T=_?w:w*y,R=(x+C)/(x-C),A=-2*x*C/(x-C);t.FromValuesToRef(O,0,0,0,0,T,0,0,0,0,R,1,0,0,A,0,g),g._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(u,y,m,b){var g=new t;return t.PerspectiveFovRHToRef(u,y,m,b,g),g},t.PerspectiveFovRHToRef=function(u,y,m,b,g,_){void 0===_&&(_=!0);var C=m,x=b,w=1/Math.tan(.5*u),O=_?w/y:w,T=_?w:w*y,R=-(x+C)/(x-C),A=-2*x*C/(x-C);t.FromValuesToRef(O,0,0,0,0,T,0,0,0,0,R,-1,0,0,A,0,g),g._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(u,y,m,b,g){void 0===g&&(g=!1);var _=g?-1:1,C=Math.tan(u.upDegrees*Math.PI/180),x=Math.tan(u.downDegrees*Math.PI/180),w=Math.tan(u.leftDegrees*Math.PI/180),O=Math.tan(u.rightDegrees*Math.PI/180),T=2/(w+O),R=2/(C+x),A=b._m;A[0]=T,A[1]=A[2]=A[3]=A[4]=0,A[5]=R,A[6]=A[7]=0,A[8]=(w-O)*T*.5,A[9]=-(C-x)*R*.5,A[10]=-m/(y-m),A[11]=1*_,A[12]=A[13]=A[15]=0,A[14]=-2*m*y/(m-y),b._markAsUpdated()},t.GetAsMatrix2x2=function(u){return[u._m[0],u._m[1],u._m[4],u._m[5]]},t.GetAsMatrix3x3=function(u){return[u._m[0],u._m[1],u._m[2],u._m[4],u._m[5],u._m[6],u._m[8],u._m[9],u._m[10]]},t.Transpose=function(u){var y=new t;return t.TransposeToRef(u,y),y},t.TransposeToRef=function(u,y){var m=y._m,b=u._m;m[0]=b[0],m[1]=b[4],m[2]=b[8],m[3]=b[12],m[4]=b[1],m[5]=b[5],m[6]=b[9],m[7]=b[13],m[8]=b[2],m[9]=b[6],m[10]=b[10],m[11]=b[14],m[12]=b[3],m[13]=b[7],m[14]=b[11],m[15]=b[15],y._updateIdentityStatus(u._isIdentity,u._isIdentityDirty)},t.Reflection=function(u){var y=new t;return t.ReflectionToRef(u,y),y},t.ReflectionToRef=function(u,y){u.normalize();var m=u.normal.x,b=u.normal.y,g=u.normal.z,_=-2*m,C=-2*b,x=-2*g;t.FromValuesToRef(_*m+1,C*m,x*m,0,_*b,C*b+1,x*b,0,_*g,C*g,x*g+1,0,_*u.d,C*u.d,x*u.d,1,y)},t.FromXYZAxesToRef=function(u,y,m,b){t.FromValuesToRef(u.x,u.y,u.z,0,y.x,y.y,y.z,0,m.x,m.y,m.z,0,0,0,0,1,b)},t.FromQuaternionToRef=function(u,y){var m=u.x*u.x,b=u.y*u.y,g=u.z*u.z,_=u.x*u.y,C=u.z*u.w,x=u.z*u.x,w=u.y*u.w,O=u.y*u.z,T=u.x*u.w;y._m[0]=1-2*(b+g),y._m[1]=2*(_+C),y._m[2]=2*(x-w),y._m[3]=0,y._m[4]=2*(_-C),y._m[5]=1-2*(g+m),y._m[6]=2*(O+T),y._m[7]=0,y._m[8]=2*(x+w),y._m[9]=2*(O-T),y._m[10]=1-2*(b+m),y._m[11]=0,y._m[12]=0,y._m[13]=0,y._m[14]=0,y._m[15]=1,y._markAsUpdated()},t.prototype._markAsUpdated=function(){this.updateFlag=t._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var u=this._m;this._isIdentity=1===u[0]&&0===u[1]&&0===u[2]&&0===u[3]&&0===u[4]&&1===u[5]&&0===u[6]&&0===u[7]&&0===u[8]&&0===u[9]&&1===u[10]&&0===u[11]&&0===u[12]&&0===u[13]&&0===u[14]&&1===u[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var u=this._m,y=u[0],m=u[1],b=u[2],g=u[3],_=u[4],C=u[5],x=u[6],w=u[7],O=u[8],T=u[9],R=u[10],A=u[11],E=u[12],P=u[13],S=u[14],I=u[15],z=R*I-S*A,M=T*I-P*A,F=T*S-P*R,D=O*I-E*A,U=O*S-R*E,L=O*P-E*T;return y*+(C*z-x*M+w*F)+m*-(_*z-x*D+w*U)+b*+(_*M-C*D+w*L)+g*-(_*F-C*U+x*L)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(u){var y=new t;return this.addToRef(u,y),y},t.prototype.addToRef=function(u,y){for(var m=0;m<16;m++)y._m[m]=this._m[m]+u._m[m];return y._markAsUpdated(),this},t.prototype.addToSelf=function(u){for(var y=0;y<16;y++)this._m[y]+=u._m[y];return this._markAsUpdated(),this},t.prototype.invertToRef=function(u){if(!0===this._isIdentity)return t.IdentityToRef(u),this;var y=this._m,m=y[0],b=y[1],g=y[2],_=y[3],C=y[4],x=y[5],w=y[6],O=y[7],T=y[8],R=y[9],A=y[10],E=y[11],P=y[12],S=y[13],I=y[14],z=y[15],M=A*z-I*E,F=R*z-S*E,D=R*I-S*A,U=T*z-P*E,L=T*I-A*P,N=T*S-P*R,j=+(x*M-w*F+O*D),V=-(C*M-w*U+O*L),H=+(C*F-x*U+O*N),k=-(C*D-x*L+w*N),B=m*j+b*V+g*H+_*k;if(0===B)return u.copyFrom(this),this;var G=1/B,W=w*z-I*O,q=x*z-S*O,Y=x*I-S*w,X=C*z-P*O,Z=C*I-P*w,Q=C*S-P*x,J=w*E-A*O,K=x*E-R*O,$=x*A-R*w,tt=C*E-T*O,et=C*A-T*w,nt=C*R-T*x,ot=-(b*M-g*F+_*D),rt=+(m*M-g*U+_*L),it=-(m*F-b*U+_*N),st=+(m*D-b*L+g*N),at=+(b*W-g*q+_*Y),pt=-(m*W-g*X+_*Z),ut=+(m*q-b*X+_*Q),lt=-(m*Y-b*Z+g*Q),ct=-(b*J-g*K+_*$),ht=+(m*J-g*tt+_*et),dt=-(m*K-b*tt+_*nt),ft=+(m*$-b*et+g*nt);return t.FromValuesToRef(j*G,ot*G,at*G,ct*G,V*G,rt*G,pt*G,ht*G,H*G,it*G,ut*G,dt*G,k*G,st*G,lt*G,ft*G,u),this},t.prototype.addAtIndex=function(u,y){return this._m[u]+=y,this._markAsUpdated(),this},t.prototype.multiplyAtIndex=function(u,y){return this._m[u]*=y,this._markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(u,y,m){return this._m[12]=u,this._m[13]=y,this._m[14]=m,this._markAsUpdated(),this},t.prototype.setTranslation=function(u){return this.setTranslationFromFloats(u.x,u.y,u.z)},t.prototype.getTranslation=function(){return new b.Vector3(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(u){return u.x=this._m[12],u.y=this._m[13],u.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var u=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,u[12],u[13],u[14],u[15],this),this._updateIdentityStatus(0===u[12]&&0===u[13]&&0===u[14]&&1===u[15]),this},t.prototype.multiply=function(u){var y=new t;return this.multiplyToRef(u,y),y},t.prototype.copyFrom=function(u){u.copyToArray(this._m);var y=u;return this._updateIdentityStatus(y._isIdentity,y._isIdentityDirty,y._isIdentity3x2,y._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(u,y){void 0===y&&(y=0);for(var m=0;m<16;m++)u[y+m]=this._m[m];return this},t.prototype.multiplyToRef=function(u,y){return this._isIdentity?(y.copyFrom(u),this):u._isIdentity?(y.copyFrom(this),this):(this.multiplyToArray(u,y._m,0),y._markAsUpdated(),this)},t.prototype.multiplyToArray=function(u,y,m){var b=this._m,g=u.m,_=b[0],C=b[1],x=b[2],w=b[3],O=b[4],T=b[5],R=b[6],A=b[7],E=b[8],P=b[9],S=b[10],I=b[11],z=b[12],M=b[13],F=b[14],D=b[15],U=g[0],L=g[1],N=g[2],j=g[3],V=g[4],H=g[5],k=g[6],B=g[7],G=g[8],W=g[9],q=g[10],Y=g[11],X=g[12],Z=g[13],Q=g[14],J=g[15];return y[m]=_*U+C*V+x*G+w*X,y[m+1]=_*L+C*H+x*W+w*Z,y[m+2]=_*N+C*k+x*q+w*Q,y[m+3]=_*j+C*B+x*Y+w*J,y[m+4]=O*U+T*V+R*G+A*X,y[m+5]=O*L+T*H+R*W+A*Z,y[m+6]=O*N+T*k+R*q+A*Q,y[m+7]=O*j+T*B+R*Y+A*J,y[m+8]=E*U+P*V+S*G+I*X,y[m+9]=E*L+P*H+S*W+I*Z,y[m+10]=E*N+P*k+S*q+I*Q,y[m+11]=E*j+P*B+S*Y+I*J,y[m+12]=z*U+M*V+F*G+D*X,y[m+13]=z*L+M*H+F*W+D*Z,y[m+14]=z*N+M*k+F*q+D*Q,y[m+15]=z*j+M*B+F*Y+D*J,this},t.prototype.equals=function(u){var y=u;if(!y)return!1;if((this._isIdentity||y._isIdentity)&&!this._isIdentityDirty&&!y._isIdentityDirty)return this._isIdentity&&y._isIdentity;var m=this.m,b=y.m;return m[0]===b[0]&&m[1]===b[1]&&m[2]===b[2]&&m[3]===b[3]&&m[4]===b[4]&&m[5]===b[5]&&m[6]===b[6]&&m[7]===b[7]&&m[8]===b[8]&&m[9]===b[9]&&m[10]===b[10]&&m[11]===b[11]&&m[12]===b[12]&&m[13]===b[13]&&m[14]===b[14]&&m[15]===b[15]},t.prototype.clone=function(){var u=new t;return u.copyFrom(this),u},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var u=this._m[0]||0,y=1;y<16;y++)u=397*u^(this._m[y]||0);return u},t.prototype.decompose=function(u,y,m){if(this._isIdentity)return m&&m.setAll(0),u&&u.setAll(1),y&&y.copyFromFloats(0,0,0,1),!0;var b=this._m;m&&m.copyFromFloats(b[12],b[13],b[14]);var C=u||_.MathTmp.Vector3[0];if(C.x=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]),C.y=Math.sqrt(b[4]*b[4]+b[5]*b[5]+b[6]*b[6]),C.z=Math.sqrt(b[8]*b[8]+b[9]*b[9]+b[10]*b[10]),this.determinant()<=0&&(C.y*=-1),0===C.x||0===C.y||0===C.z)return y&&y.copyFromFloats(0,0,0,1),!1;if(y){var x=1/C.x,w=1/C.y,O=1/C.z;t.FromValuesToRef(b[0]*x,b[1]*x,b[2]*x,0,b[4]*w,b[5]*w,b[6]*w,0,b[8]*O,b[9]*O,b[10]*O,0,0,0,0,1,_.MathTmp.Matrix[0]),g.Quaternion.FromRotationMatrixToRef(_.MathTmp.Matrix[0],y)}return!0},t.prototype.getRow=function(u){if(u<0||u>3)return null;var y=4*u;return new C.Vector4(this._m[y+0],this._m[y+1],this._m[y+2],this._m[y+3])},t.prototype.setRow=function(u,y){return this.setRowFromFloats(u,y.x,y.y,y.z,y.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(u){return t.TransposeToRef(this,u),this},t.prototype.setRowFromFloats=function(u,y,m,b,g){if(u<0||u>3)return this;var _=4*u;return this._m[_+0]=y,this._m[_+1]=m,this._m[_+2]=b,this._m[_+3]=g,this._markAsUpdated(),this},t.prototype.scale=function(u){var y=new t;return this.scaleToRef(u,y),y},t.prototype.scaleToRef=function(u,y){for(var m=0;m<16;m++)y._m[m]=this._m[m]*u;return y._markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(u,y){for(var m=0;m<16;m++)y._m[m]+=this._m[m]*u;return y._markAsUpdated(),this},t.prototype.toNormalMatrix=function(u){var y=_.MathTmp.Matrix[0];this.invertToRef(y),y.transposeToRef(u);var m=u._m;t.FromValuesToRef(m[0],m[1],m[2],0,m[4],m[5],m[6],0,m[8],m[9],m[10],0,0,0,0,1,u)},t.prototype.getRotationMatrix=function(){var u=new t;return this.getRotationMatrixToRef(u),u},t.prototype.getRotationMatrixToRef=function(u){var y=_.MathTmp.Vector3[0];if(!this.decompose(y))return t.IdentityToRef(u),this;var m=this._m,b=1/y.x,g=1/y.y,C=1/y.z;return t.FromValuesToRef(m[0]*b,m[1]*b,m[2]*b,0,m[4]*g,m[5]*g,m[6]*g,0,m[8]*C,m[9]*C,m[10]*C,0,0,0,0,1,u),this},t.prototype.toggleModelMatrixHandInPlace=function(){var u=this._m;u[2]*=-1,u[6]*=-1,u[8]*=-1,u[9]*=-1,u[14]*=-1,this._markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var u=this._m;u[8]*=-1,u[9]*=-1,u[10]*=-1,u[11]*=-1,this._markAsUpdated()},t.prototype._updateIdentityStatus=function(u,y,m,b){void 0===y&&(y=!1),void 0===m&&(m=!1),void 0===b&&(b=!0),this.updateFlag=t._updateFlagSeed++,this._isIdentity=u,this._isIdentity3x2=u||m,this._isIdentityDirty=!this._isIdentity&&y,this._isIdentity3x2Dirty=!this._isIdentity3x2&&b},t._updateFlagSeed=0,t._identityReadOnly=t.Identity(),t}();y.Matrix=x},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(0),g=m(7),_=m(1),C=function(){function t(u){this.name=u,this.children={},this.eventManager=null,this.alive=!1,this.uuid=_.newId("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(u){if("function"==typeof u)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof u)throw new Error("You passed a "+typeof u+", an instance of component is expected");var y=b.getComponentName(u);if(this.components[y]){if(this.components[y]===u)return u;this.removeComponent(this.components[y],!1)}return this.addComponent(u)},t.prototype.hasComponent=function(u){var y=typeof u;if("string"!==y&&"object"!==y&&"function"!==y)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==u)return!1;var m="string"===y?u:b.getComponentName(u),g=this.components[m];return!!g&&("object"===y?g===u:"function"!==y||g instanceof u)},t.prototype.getComponent=function(u){var y=typeof u;if("string"!==y&&"function"!==y)throw new Error("Entity#get(component): component is not a class or name");var m="string"===y?u:b.getComponentName(u),g=this.components[m];if(!g)throw new Error('Can not get component "'+m+'" from entity "'+this.identifier+'"');if("function"===y){if(g instanceof u)return g;throw new Error('Can not get component "'+m+'" from entity "'+this.identifier+'" (by instance)')}return g},t.prototype.getComponentOrNull=function(u){var y=typeof u;if("string"!==y&&"function"!==y)throw new Error("Entity#getOrNull(component): component is not a class or name");var m="string"===y?u:b.getComponentName(u),g=this.components[m];return g?"function"===y?g instanceof u?g:null:g:null},t.prototype.getComponentOrCreate=function(u){if("function"!=typeof u)throw new Error("Entity#getOrCreate(component): component is not a class");var y=this.getComponentOrNull(u);return y||(y=new u,b.getComponentName(y),this.addComponentOrReplace(y)),y},t.prototype.addComponent=function(u){if("object"!=typeof u)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var y=b.getComponentName(u),m=b.getComponentClassId(u);if(this.components[y])throw new Error('A component of type "'+y+'" is already present in entity "'+this.identifier+'"');this.components[y]=u,this.eventManager&&this.eventManager.fireEvent(new g.ComponentAdded(this,y,m));var _=u;return"function"==typeof _.addedToEntity&&_.addedToEntity(this),u},t.prototype.removeComponent=function(u,y){void 0===y&&(y=!0);var m=typeof u;if("string"!==m&&"function"!==m&&"object"!==m)throw new Error("Entity#remove(component): component is not a class, class or name");var C="string"===m?u:b.getComponentName(u),x=this.components[C];if(x){if("function"===m)return x instanceof u?(delete this.components[C],void(x&&(y&&this.eventManager&&this.eventManager.fireEvent(new g.ComponentRemoved(this,C,x)),"function"==typeof x.removedFromEntity&&x.removedFromEntity(this)))):void _.log('Entity Warning: Trying to remove wrong (by constructor) component "'+C+'" from entity "'+this.identifier+'"');delete this.components[C],x&&(y&&this.eventManager&&this.eventManager.fireEvent(new g.ComponentRemoved(this,C,x)),"function"==typeof x.removedFromEntity&&x.removedFromEntity(this))}else _.log('Entity Warning: Trying to remove inexisting component "'+C+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(u){var y;if(u&&"getEntityRepresentation"in u){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");y=u.getEntityRepresentation(this.engine)}else y=!u&&this.engine?this.engine.rootEntity:u;var m=this.getParent();if(y===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(y===m)return this;var b=this.getCircularAncestor(y);if(b)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+b+'")');return m&&delete m.children[this.uuid],null!==y&&"0"!==y.uuid&&(!y.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),y.isAddedToEngine()&&!this.isAddedToEngine()&&y.engine.addEntity(this)),this._parent=y||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new g.ParentChanged(this,y)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!0,configurable:!0}),t.prototype.getCircularAncestor=function(u){for(var y=this.engine?this.engine.rootEntity:null,m=u;m&&m!==y;){var b=m.getParent();if(b===this)return m.uuid;m=b}return null},t.prototype.registerAsChild=function(){var u=this.getParent();this.uuid&&u&&(u.children[this.uuid]=this)},t}();y.Entity=C},function(u,y,m){"use strict";var b=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var g=m(8),_=b([g.EventConstructor()],(function(u,y){this.uuid=u,this.payload=y}));y.UUIDEvent=_;var C=b([g.EventConstructor()],(function(u){this.payload=u}));y.RaycastResponse=C;var x=b([g.EventConstructor()],(function(u){this.payload=u}));y.PointerEvent=x},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(13),g=m(4),_=m(7),C=m(16),x=m(28),w=function(){function t(){}return t.prototype.activate=function(u){u.eventManager.addListener(b.RaycastResponse,this,(function(u){"HitFirst"===u.payload.queryType?x.PhysicsCast.instance.handleRaycastHitFirstResponse(u):"HitAll"===u.payload.queryType&&x.PhysicsCast.instance.handleRaycastHitAllResponse(u)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}();y.RaycastEventSystem=w,y.raycastEventSystem=new w;var O=function(){function t(){}return t.prototype.activate=function(u){u.eventManager.addListener(b.PointerEvent,this,(function(u){C.Input.instance.handlePointerEvent(u.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))},t}();y.PointerEventSystem=O,y.pointerEventSystem=new O;var T=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(u){u.eventManager.addListener(b.UUIDEvent,this,this.handleEvent),u.eventManager.addListener(_.ComponentAdded,this,this.componentAdded),u.eventManager.addListener(_.ComponentRemoved,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(u){for(var y in u.components){var m=u.components[y];m instanceof g.OnUUIDEvent&&(this.handlerMap[m.uuid]=m)}},t.prototype.onRemoveEntity=function(u){for(var y in u.components){var m=u.components[y];m instanceof g.OnUUIDEvent&&delete this.handlerMap[m.uuid]}},t.prototype.componentAdded=function(u){if(u.entity.isAddedToEngine()){var y=u.entity.components[u.componentName];y instanceof g.OnUUIDEvent&&(this.handlerMap[y.uuid]=y)}},t.prototype.componentRemoved=function(u){u.entity.isAddedToEngine()&&u.component instanceof g.OnUUIDEvent&&delete this.handlerMap[u.component.uuid]},t.prototype.handleEvent=function(u){if(u.uuid in this.handlerMap){var y=this.handlerMap[u.uuid];y&&y.callback&&"call"in y.callback&&y.callback(u.payload)}},t}();y.UUIDEventSystem=T,y.uuidEventSystem=new T},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(2),g=m(6),_=function(){function t(u,y){void 0===u&&(u=0),void 0===y&&(y=0),this.x=u,this.y=y}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.Add=function(u,y){return new t(u.x,u.y).addInPlace(y)},t.FromArray=function(u,y){return void 0===y&&(y=0),new t(u[y],u[y+1])},t.FromArrayToRef=function(u,y,m){m.x=u[y],m.y=u[y+1]},t.CatmullRom=function(u,y,m,b,g){var _=g*g,C=g*_;return new t(.5*(2*y.x+(-u.x+m.x)*g+(2*u.x-5*y.x+4*m.x-b.x)*_+(-u.x+3*y.x-3*m.x+b.x)*C),.5*(2*y.y+(-u.y+m.y)*g+(2*u.y-5*y.y+4*m.y-b.y)*_+(-u.y+3*y.y-3*m.y+b.y)*C))},t.Clamp=function(u,y,m){var b=u.x;b=(b=b>m.x?m.x:b)<y.x?y.x:b;var g=u.y;return new t(b,g=(g=g>m.y?m.y:g)<y.y?y.y:g)},t.Hermite=function(u,y,m,b,g){var _=g*g,C=g*_,x=2*C-3*_+1,w=-2*C+3*_,O=C-2*_+g,T=C-_;return new t(u.x*x+m.x*w+y.x*O+b.x*T,u.y*x+m.y*w+y.y*O+b.y*T)},t.Lerp=function(u,y,m){return new t(u.x+(y.x-u.x)*m,u.y+(y.y-u.y)*m)},t.Dot=function(u,y){return u.x*y.x+u.y*y.y},t.Normalize=function(u){var y=new t(u.x,u.y);return y.normalize(),y},t.Minimize=function(u,y){return new t(u.x<y.x?u.x:y.x,u.y<y.y?u.y:y.y)},t.Maximize=function(u,y){return new t(u.x>y.x?u.x:y.x,u.y>y.y?u.y:y.y)},t.Transform=function(u,y){var m=t.Zero();return t.TransformToRef(u,y,m),m},t.TransformToRef=function(u,y,m){var b=y.m,g=u.x*b[0]+u.y*b[4]+b[12],_=u.x*b[1]+u.y*b[5]+b[13];m.x=g,m.y=_},t.PointInTriangle=function(u,y,m,b){var g=.5*(-m.y*b.x+y.y*(-m.x+b.x)+y.x*(m.y-b.y)+m.x*b.y),_=g<0?-1:1,C=(y.y*b.x-y.x*b.y+(b.y-y.y)*u.x+(y.x-b.x)*u.y)*_,x=(y.x*m.y-y.y*m.x+(y.y-m.y)*u.x+(m.x-y.x)*u.y)*_;return C>0&&x>0&&C+x<2*g*_},t.Distance=function(u,y){return Math.sqrt(t.DistanceSquared(u,y))},t.DistanceSquared=function(u,y){var m=u.x-y.x,b=u.y-y.y;return m*m+b*b},t.Center=function(u,y){var m=t.Add(u,y);return m.scaleInPlace(.5),m},t.DistanceOfPointFromSegment=function(u,y,m){var b=t.DistanceSquared(y,m);if(0===b)return t.Distance(u,y);var g=m.subtract(y),_=Math.max(0,Math.min(1,t.Dot(u.subtract(y),g)/b)),C=y.add(g.multiplyByFloats(_,_));return t.Distance(u,C)},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){return 397*(this.x||0)^(this.y||0)},t.prototype.toArray=function(u,y){return void 0===y&&(y=0),u[y]=this.x,u[y+1]=this.y,this},t.prototype.asArray=function(){var u=new Array;return this.toArray(u,0),u},t.prototype.copyFrom=function(u){return this.x=u.x,this.y=u.y,this},t.prototype.copyFromFloats=function(u,y){return this.x=u,this.y=y,this},t.prototype.set=function(u,y){return this.copyFromFloats(u,y)},t.prototype.add=function(u){return new t(this.x+u.x,this.y+u.y)},t.prototype.addToRef=function(u,y){return y.x=this.x+u.x,y.y=this.y+u.y,this},t.prototype.addInPlace=function(u){return this.x+=u.x,this.y+=u.y,this},t.prototype.addVector3=function(u){return new t(this.x+u.x,this.y+u.y)},t.prototype.subtract=function(u){return new t(this.x-u.x,this.y-u.y)},t.prototype.subtractToRef=function(u,y){return y.x=this.x-u.x,y.y=this.y-u.y,this},t.prototype.subtractInPlace=function(u){return this.x-=u.x,this.y-=u.y,this},t.prototype.multiplyInPlace=function(u){return this.x*=u.x,this.y*=u.y,this},t.prototype.multiply=function(u){return new t(this.x*u.x,this.y*u.y)},t.prototype.multiplyToRef=function(u,y){return y.x=this.x*u.x,y.y=this.y*u.y,this},t.prototype.multiplyByFloats=function(u,y){return new t(this.x*u,this.y*y)},t.prototype.divide=function(u){return new t(this.x/u.x,this.y/u.y)},t.prototype.divideToRef=function(u,y){return y.x=this.x/u.x,y.y=this.y/u.y,this},t.prototype.divideInPlace=function(u){return this.divideToRef(u,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.scaleInPlace=function(u){return this.x*=u,this.y*=u,this},t.prototype.scale=function(u){var y=new t(0,0);return this.scaleToRef(u,y),y},t.prototype.scaleToRef=function(u,y){return y.x=this.x*u,y.y=this.y*u,this},t.prototype.scaleAndAddToRef=function(u,y){return y.x+=this.x*u,y.y+=this.y*u,this},t.prototype.equals=function(u){return u&&this.x===u.x&&this.y===u.y},t.prototype.equalsWithEpsilon=function(u,y){return void 0===y&&(y=b.Epsilon),u&&g.Scalar.WithinEpsilon(this.x,u.x,y)&&g.Scalar.WithinEpsilon(this.y,u.y,y)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var u=this.length();if(0===u)return this;var y=1/u;return this.x*=y,this.y*=y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t}();y.Vector2=_},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__assign||function(){return(_=Object.assign||function(u){for(var y,m=1,b=arguments.length;m<b;m++)for(var g in y=arguments[m])Object.prototype.hasOwnProperty.call(y,g)&&(u[g]=y[g]);return u}).apply(this,arguments)},C=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var x,w=m(27),O=m(5),T=m(0);!function(u){u.POINTER="POINTER",u.PRIMARY="PRIMARY",u.SECONDARY="SECONDARY",u.ANY="ANY"}(x=y.ActionButton||(y.ActionButton={}));var c=function(u){if(this.callback=u,!u||!("apply"in u)||!("call"in u))throw new Error("Callback is not a function");E.ensureInstance()};y.PointerEventComponent=c;var R=function(u){function e(){return null!==u&&u.apply(this,arguments)||this}return g(e,u),C([T.Component("pointerDown")],e)}(c);y.GlobalPointerDown=R;var A=function(u){function e(){return null!==u&&u.apply(this,arguments)||this}return g(e,u),C([T.Component("pointerUp")],e)}(c);y.GlobalPointerUp=A;var f=function(u,y){this.fn=u,this.useRaycast=y},E=function(){function t(){var u,y;this.subscriptions=((u={})[x.POINTER]={BUTTON_DOWN:[],BUTTON_UP:[]},u[x.PRIMARY]={BUTTON_DOWN:[],BUTTON_UP:[]},u[x.SECONDARY]={BUTTON_DOWN:[],BUTTON_UP:[]},u[x.ANY]={BUTTON_DOWN:[],BUTTON_UP:[]},u),this.internalState=((y={})[x.POINTER]={BUTTON_DOWN:!1},y[x.PRIMARY]={BUTTON_DOWN:!1},y[x.SECONDARY]={BUTTON_DOWN:!1},y[x.ANY]={BUTTON_DOWN:!1},y)}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!0,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.isButtonPressed=function(u){return this.internalState[u]},t.prototype.subscribe=function(u,y,m,b){var g=this;return this.subscriptions[y][u].push(new f(b,m)),function(){return g.unsubscribe(u,y,b)}},t.prototype.unsubscribe=function(u,y,m){var b=this.getSubscriptionId(u,y,m);return b>-1&&this.subscriptions[y][u].splice(b,1)},t.prototype.handlePointerEvent=function(u){var y=this.getPointerById(u.buttonId),m=_(_({},u),{button:y,direction:(new O.Vector3).copyFrom(u.direction),origin:(new O.Vector3).copyFrom(u.origin),hit:void 0}),b=u.hit?_(_({},u.hit),{hitPoint:(new O.Vector3).copyFrom(u.hit.hitPoint),normal:(new O.Vector3).copyFrom(u.hit.normal),worldNormal:(new O.Vector3).copyFrom(u.hit.worldNormal)}):void 0;if(u.type===w.InputEventType.DOWN){this.internalState[y].BUTTON_DOWN=!0;for(var g=0;g<this.subscriptions[y].BUTTON_DOWN.length;g++)(C=this.subscriptions[y].BUTTON_DOWN[g]).useRaycast?m.hit=b:m.hit=void 0,C.fn(m);b&&b.entityId&&T.DisposableComponent.engine&&(E=(x=T.DisposableComponent.engine.entities[b.entityId])&&x.getComponentOrNull(R))&&(m.hit=b,E.callback(m))}else{for(this.internalState[y].BUTTON_DOWN=!1,g=0;g<this.subscriptions[y].BUTTON_UP.length;g++){var C;(C=this.subscriptions[y].BUTTON_UP[g]).useRaycast?m.hit=b:m.hit=void 0,C.fn(m)}var x,E;b&&b.entityId&&T.DisposableComponent.engine&&(E=(x=T.DisposableComponent.engine.entities[b.entityId])&&x.getComponentOrNull(A))&&(m.hit=b,E.callback(m))}},t.prototype.getSubscriptionId=function(u,y,m){for(var b=0;b<this.subscriptions[y][u].length;b++)if(this.subscriptions[y][u][b].fn===m)return b;return-1},t.prototype.getPointerById=function(u){return 0===u?x.POINTER:1===u?x.PRIMARY:x.SECONDARY},t}();y.Input=E},function(u,y,m){"use strict";var b=this&&this.__read||function(u,y){var m="function"==typeof Symbol&&u[Symbol.iterator];if(!m)return u;var b,g,_=m.call(u),C=[];try{for(;(void 0===y||y-- >0)&&!(b=_.next()).done;)C.push(b.value)}catch(u){g={error:u}}finally{try{b&&!b.done&&(m=_.return)&&m.call(_)}finally{if(g)throw g.error}}return C},g=this&&this.__spread||function(){for(var u=[],y=0;y<arguments.length;y++)u=u.concat(b(arguments[y]));return u};Object.defineProperty(y,"__esModule",{value:!0});var _=m(7),C=m(0),x=m(8),w=m(32),O=m(1),T=m(12),R=function(){function t(u){this.eventManager=new x.EventManager,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(_.ComponentAdded,this,this.componentAddedHandler),this.eventManager.addListener(_.ComponentRemoved,this,this.componentRemovedHandler),this.rootEntity=u,this.playerEntity=new T.Entity,this.playerEntity.uuid="PlayerEntityReference",this.addEntity(this.playerEntity),this.avatarEntity=new T.Entity,this.avatarEntity.uuid="AvatarPositionEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!0,configurable:!0}),t.prototype.addEntity=function(u){var y=u.getParent();if(u.isAddedToEngine())return u;for(var m in u.eventManager=this.eventManager,u.engine=this,this._entities[u.uuid]=u,this.checkRequirementsAndAdd(u),y?y.isAddedToEngine()||y===this.rootEntity||O.log("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+y.uuid):u.setParent(this.rootEntity),u.alive=!0,u.children){var b=u.children[m];b&&(b.isAddedToEngine()||this.addEntity(b))}return u},t.prototype.removeEntity=function(u){var y=u.uuid;if(u.isAddedToEngine()){for(var m in u.components){var b=this._componentGroups[m];if(b)for(var g in b)b[g].removeEntity(u);delete this.entityLists[m][y]}for(var _=0;_<this.simpleSystems.length;_++){var C=this.simpleSystems[_];C.onRemoveEntity&&C.onRemoveEntity(u)}for(var _ in u.children){var x=u.children[_];x&&this.removeEntity(x)}return u.alive=!1,u.eventManager=null,delete this._entities[y],!0}for(var m in O.log("Engine: Trying to remove non existent entity from engine."),u.isAddedToEngine()?O.log("Engine: Entity id: "+y):O.log('Engine: Entity "'+u.uuid+'" has not been added to any engine yet.'),O.log("Engine: Entity's components:"),u.components)O.log(m);return!1},t.prototype.addSystem=function(u,y){if(void 0===y&&(y=0),-1!==this.addedSystems.indexOf(u))return O.log("Engine: Trying to add a system that is already added. Aborting"),u;if(this.systems.length>0)for(var m=0;m<this.systems.length;m++){var b=this.systems[m],g=m===this.systems.length-1;if(b.priority>y){this.addedSystems.push(u),this.systems.splice(m,0,{system:u,priority:y});break}if(g){this.addedSystems.push(u),this.systems.splice(m+1,0,{system:u,priority:y});break}}else this.addedSystems.push(u),this.systems.splice(1,0,{system:u,priority:y});return this.registerSystem(u),u},t.prototype.removeSystem=function(u){var y=this.addedSystems.indexOf(u);if(-1!==y){u.active=!1,u.deactivate&&u.deactivate(),this.addedSystems.splice(y,1);for(var m=0;m<this.systems.length;m++)this.systems[m].system===u&&this.systems.splice(m,1);return!0}return!1},t.prototype.update=function(u){for(var y in this.systems){var m=this.systems[y].system;if(m.active&&m.update)try{m.update(u)}catch(u){O.error(u)}}return this},t.prototype.getEntitiesWithComponent=function(u){var y="string"==typeof u?u:C.getComponentName(u);return y in this.entityLists?this.entityLists[y]:this.entityLists[y]={}},t.prototype.registerComponent=function(u){var y=C.getComponentId(u),m=C.getComponentName(u),b=C.getComponentClassId(u);this._disposableComponents[y]=u,null!==b&&(this.eventManager.fireEvent(new C.DisposableComponentCreated(y,m,b)),this.eventManager.fireEvent(new C.DisposableComponentUpdated(y,u)))},t.prototype.disposeComponent=function(u){var y=C.getComponentId(u);return delete this._disposableComponents[y]&&(this.eventManager.fireEvent(new C.DisposableComponentRemoved(y)),u.onDispose&&u.onDispose(),!0)},t.prototype.updateComponent=function(u){this.eventManager.fireEvent(new C.DisposableComponentUpdated(C.getComponentId(u),u))},t.prototype.getComponentGroup=function(){for(var u=[],y=0;y<arguments.length;y++)u[y]=arguments[y];var m=new(w.ComponentGroup.bind.apply(w.ComponentGroup,g([void 0],u)));m.active=!0;for(var b=m.requiresNames,_=0;_<b.length;_++){var C=b[_],x=this._componentGroups[C];x||(this._componentGroups[C]=x=[]),-1===x.indexOf(m)&&x.push(m)}for(var O in this._entities)this.checkRequirements(this._entities[O],m);return m},t.prototype.removeComponentGroup=function(u){if(u.active){u.active=!1;for(var y=u.requiresNames,m=0;m<y.length;m++){var b=y[m],g=this._componentGroups[b];if(g){var _=g.indexOf(u);-1!==_&&g.splice(_,1)}}return!0}return!1},t.prototype.registerSystem=function(u){u.active=!0,u.activate&&u.activate(this),this.simpleSystems.push(u)},t.prototype.checkRequirementsAndAdd=function(u){if(u.isAddedToEngine()){for(var y in u.components){y in this.entityLists||(this.entityLists[y]={}),this.entityLists[y][u.uuid]=u;var m=this._componentGroups[y];if(m)for(var b in m)this.checkRequirements(u,m[b])}for(var g=0;g<this.simpleSystems.length;g++){var _=this.simpleSystems[g];_.onAddEntity&&_.onAddEntity(u)}}},t.prototype.checkRequirements=function(u,y){y.meetsRequirements(u)?y.hasEntity(u)||y.addEntity(u):y.hasEntity(u)&&y.removeEntity(u)},t.prototype.componentAddedHandler=function(u){var y,m=u.entity,b=u.componentName;if(m.isAddedToEngine()){this.entityLists[b]?this.entityLists[b][m.uuid]=m:this.entityLists[b]=((y={})[m.uuid]=m,y);var g=this._componentGroups[b];if(g)for(var _ in g)this.checkRequirements(m,g[_])}},t.prototype.componentRemovedHandler=function(u){var y=u.entity,m=u.componentName;if(y.isAddedToEngine()){delete this.entityLists[m][y.uuid];var b=this._componentGroups[m];if(b)for(var g in b)this.checkRequirements(y,b[g])}},t}();y.Engine=R},function(u,y,m){"use strict";var b;Object.defineProperty(y,"__esModule",{value:!0}),function(u){u[u.PERCENT=0]="PERCENT",u[u.PIXELS=1]="PIXELS"}(b=y.UIValueType||(y.UIValueType={}));var g=function(){function t(u){if(this.type=b.PIXELS,"string"==typeof u){var y=u;y.indexOf("px")>-1?this.type=b.PIXELS:y.indexOf("%")>-1&&(this.type=b.PERCENT),this.value=parseFloat(y)}else this.value=u}return t.prototype.toString=function(){var u=this.value.toString();return this.type===b.PERCENT?u+="%":u+="px",u},t}();y.UIValue=g},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(1),g=Promise.resolve().then.bind(Promise.resolve());y.executeTask=function(u){var y=g(u);return y.isComplete=!1,y.then((function(u){y.isComplete=!0,y.result=u,y.didFail=!1})).catch((function(u){y.isComplete=!0,y.error=u,y.didFail=!0,b.error("executeTask: FAILED "+u.toString(),u)})),y}},function(u,y,m){"use strict";var b=this&&this.__awaiter||function(u,y,m,b){return new(m||(m=Promise))((function(g,_){function s(u){try{p(b.next(u))}catch(u){_(u)}}function a(u){try{p(b.throw(u))}catch(u){_(u)}}function p(u){var y;u.done?g(u.value):(y=u.value,y instanceof m?y:new m((function(u){u(y)}))).then(s,a)}p((b=b.apply(u,y||[])).next())}))},g=this&&this.__generator||function(u,y){var m,b,g,_,C={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function a(_){return function(x){return function(_){if(m)throw new TypeError("Generator is already executing.");for(;C;)try{if(m=1,b&&(g=2&_[0]?b.return:_[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,_[1])).done)return g;switch(b=0,g&&(_=[2&_[0],g.value]),_[0]){case 0:case 1:g=_;break;case 4:return C.label++,{value:_[1],done:!1};case 5:C.label++,b=_[1],_=[0];continue;case 7:_=C.ops.pop(),C.trys.pop();continue;default:if(!((g=(g=C.trys).length>0&&g[g.length-1])||6!==_[0]&&2!==_[0])){C=0;continue}if(3===_[0]&&(!g||_[1]>g[0]&&_[1]<g[3])){C.label=_[1];break}if(6===_[0]&&C.label<g[1]){C.label=g[1],g=_;break}if(g&&C.label<g[2]){C.label=g[2],C.ops.push(_);break}g[2]&&C.ops.pop(),C.trys.pop();continue}_=y.call(u,C)}catch(u){_=[6,u],b=0}finally{m=g=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([_,x])}}},_=this&&this.__values||function(u){var y="function"==typeof Symbol&&Symbol.iterator,m=y&&u[y],b=0;if(m)return m.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&b>=u.length&&(u=void 0),{value:u&&u[b++],done:!u}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0});var C=m(19),x=function(){function t(u,y,m,b){void 0===y&&(y=!1),this.initalize(u,y,m,b)}return t.prototype.initalize=function(u,y,m,b){return void 0===y&&(y=!1),this.mask=u,this.skipNextObservers=y,this.target=m,this.currentTarget=b,this},t}();y.ObserverEventState=x;var p=function(u,y,m){void 0===m&&(m=null),this.callback=u,this.mask=y,this.scope=m,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1};y.Observer=p;var w=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(u,y,m,b){var g,C;void 0===m&&(m=-1),void 0===b&&(b=null);var x=new t;x._observers=new Array,x._observables=u;try{for(var w=_(u),O=w.next();!O.done;O=w.next()){var T=O.value.add(y,m,!1,b);T&&x._observers.push(T)}}catch(u){g={error:u}}finally{try{O&&!O.done&&(C=w.return)&&C.call(w)}finally{if(g)throw g.error}}return x},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var u=0;u<this._observers.length;u++)this._observables[u].remove(this._observers[u]);this._observers=null,this._observables=null},t}();y.MultiObserver=w;var O=function(){function t(u){this._observers=new Array,this._onObserverAdded=null,this._eventState=new x(0),u&&(this._onObserverAdded=u)}return t.prototype.add=function(u,y,m,b,g){if(void 0===y&&(y=-1),void 0===m&&(m=!1),void 0===b&&(b=null),void 0===g&&(g=!1),!u)return null;var _=new p(u,y,b);return _.unregisterOnNextCall=g,m?this._observers.unshift(_):this._observers.push(_),this._onObserverAdded&&this._onObserverAdded(_),_},t.prototype.addOnce=function(u){return this.add(u,void 0,void 0,void 0,!0)},t.prototype.remove=function(u){return!!u&&-1!==this._observers.indexOf(u)&&(this._deferUnregister(u),!0)},t.prototype.removeCallback=function(u,y){for(var m=0;m<this._observers.length;m++)if(this._observers[m].callback===u&&(!y||y===this._observers[m].scope))return this._deferUnregister(this._observers[m]),!0;return!1},t.prototype.notifyObservers=function(u,y,m,b){var g,C;if(void 0===y&&(y=-1),!this._observers.length)return!0;var x=this._eventState;x.mask=y,x.target=m,x.currentTarget=b,x.skipNextObservers=!1,x.lastReturnValue=u;try{for(var w=_(this._observers),O=w.next();!O.done;O=w.next()){var T=O.value;if(!T._willBeUnregistered&&(T.mask&y&&(T.scope?x.lastReturnValue=T.callback.apply(T.scope,[u,x]):x.lastReturnValue=T.callback(u,x),T.unregisterOnNextCall&&this._deferUnregister(T)),x.skipNextObservers))return!1}}catch(u){g={error:u}}finally{try{O&&!O.done&&(C=w.return)&&C.call(w)}finally{if(g)throw g.error}}return!0},t.prototype.notifyObserversWithPromise=function(u,y,m,b){var g=this;void 0===y&&(y=-1);var _=Promise.resolve(u);if(!this._observers.length)return _;var C=this._eventState;return C.mask=y,C.target=m,C.currentTarget=b,C.skipNextObservers=!1,this._observers.forEach((function(m){C.skipNextObservers||m._willBeUnregistered||m.mask&y&&(_=m.scope?_.then((function(y){return C.lastReturnValue=y,m.callback.apply(m.scope,[u,C])})):_.then((function(y){return C.lastReturnValue=y,m.callback(u,C)})),m.unregisterOnNextCall&&g._deferUnregister(m))})),_.then((function(){return u}))},t.prototype.notifyObserver=function(u,y,m){void 0===m&&(m=-1);var b=this._eventState;b.mask=m,b.skipNextObservers=!1,u.callback(y,b)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var u=new t;return u._observers=this._observers.slice(0),u},t.prototype.hasSpecificMask=function(u){var y,m;void 0===u&&(u=-1);try{for(var b=_(this._observers),g=b.next();!g.done;g=b.next()){var C=g.value;if(C.mask&u||C.mask===u)return!0}}catch(u){y={error:u}}finally{try{g&&!g.done&&(m=b.return)&&m.call(b)}finally{if(y)throw y.error}}return!1},t.prototype._deferUnregister=function(u){var y=this;u.unregisterOnNextCall=!1,u._willBeUnregistered=!0,C.executeTask((function(){return b(y,void 0,void 0,(function(){return g(this,(function(y){return[2,this._remove(u)]}))}))}))},t.prototype._remove=function(u){if(!u)return!1;var y=this._observers.indexOf(u);return-1!==y&&(this._observers.splice(y,1),!0)},t}();y.Observable=O},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(2),g=m(6),_=m(3),C=function(){function t(u,y,m,b){this.x=u,this.y=y,this.z=m,this.w=b}return t.Add=function(u,y){return new t(u.x,u.y,u.z,u.w).addInPlace(y)},t.FromArray=function(u,y){return void 0===y&&(y=0),new t(u[y],u[y+1],u[y+2],u[y+3])},t.FromArrayToRef=function(u,y,m){m.x=u[y],m.y=u[y+1],m.z=u[y+2],m.w=u[y+3]},t.FromFloatArrayToRef=function(u,y,m){t.FromArrayToRef(u,y,m)},t.FromFloatsToRef=function(u,y,m,b,g){g.x=u,g.y=y,g.z=m,g.w=b},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(u){var y=t.Zero();return t.NormalizeToRef(u,y),y},t.NormalizeToRef=function(u,y){y.copyFrom(u),y.normalize()},t.Minimize=function(u,y){var m=new t(u.x,u.y,u.z,u.w);return m.minimizeInPlace(y),m},t.Maximize=function(u,y){var m=new t(u.x,u.y,u.z,u.w);return m.maximizeInPlace(y),m},t.Distance=function(u,y){return Math.sqrt(t.DistanceSquared(u,y))},t.DistanceSquared=function(u,y){var m=u.x-y.x,b=u.y-y.y,g=u.z-y.z,_=u.w-y.w;return m*m+b*b+g*g+_*_},t.Center=function(u,y){var m=t.Add(u,y);return m.scaleInPlace(.5),m},t.TransformNormal=function(u,y){var m=t.Zero();return t.TransformNormalToRef(u,y,m),m},t.TransformNormalToRef=function(u,y,m){var b=y.m,g=u.x*b[0]+u.y*b[4]+u.z*b[8],_=u.x*b[1]+u.y*b[5]+u.z*b[9],C=u.x*b[2]+u.y*b[6]+u.z*b[10];m.x=g,m.y=_,m.z=C,m.w=u.w},t.TransformNormalFromFloatsToRef=function(u,y,m,b,g,_){var C=g.m;_.x=u*C[0]+y*C[4]+m*C[8],_.y=u*C[1]+y*C[5]+m*C[9],_.z=u*C[2]+y*C[6]+m*C[10],_.w=b},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var u=this.x||0;return 397*(u=397*(u=397*u^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){var u=new Array;return this.toArray(u,0),u},t.prototype.toArray=function(u,y){return void 0===y&&(y=0),u[y]=this.x,u[y+1]=this.y,u[y+2]=this.z,u[y+3]=this.w,this},t.prototype.addInPlace=function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z,this.w+=u.w,this},t.prototype.add=function(u){return new t(this.x+u.x,this.y+u.y,this.z+u.z,this.w+u.w)},t.prototype.addToRef=function(u,y){return y.x=this.x+u.x,y.y=this.y+u.y,y.z=this.z+u.z,y.w=this.w+u.w,this},t.prototype.subtractInPlace=function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z,this.w-=u.w,this},t.prototype.subtract=function(u){return new t(this.x-u.x,this.y-u.y,this.z-u.z,this.w-u.w)},t.prototype.subtractToRef=function(u,y){return y.x=this.x-u.x,y.y=this.y-u.y,y.z=this.z-u.z,y.w=this.w-u.w,this},t.prototype.subtractFromFloats=function(u,y,m,b){return new t(this.x-u,this.y-y,this.z-m,this.w-b)},t.prototype.subtractFromFloatsToRef=function(u,y,m,b,g){return g.x=this.x-u,g.y=this.y-y,g.z=this.z-m,g.w=this.w-b,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.scaleInPlace=function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},t.prototype.scale=function(u){return new t(this.x*u,this.y*u,this.z*u,this.w*u)},t.prototype.scaleToRef=function(u,y){return y.x=this.x*u,y.y=this.y*u,y.z=this.z*u,y.w=this.w*u,this},t.prototype.scaleAndAddToRef=function(u,y){return y.x+=this.x*u,y.y+=this.y*u,y.z+=this.z*u,y.w+=this.w*u,this},t.prototype.equals=function(u){return u&&this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},t.prototype.equalsWithEpsilon=function(u,y){return void 0===y&&(y=b.Epsilon),u&&g.Scalar.WithinEpsilon(this.x,u.x,y)&&g.Scalar.WithinEpsilon(this.y,u.y,y)&&g.Scalar.WithinEpsilon(this.z,u.z,y)&&g.Scalar.WithinEpsilon(this.w,u.w,y)},t.prototype.equalsToFloats=function(u,y,m,b){return this.x===u&&this.y===y&&this.z===m&&this.w===b},t.prototype.multiplyInPlace=function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z,this.w*=u.w,this},t.prototype.multiply=function(u){return new t(this.x*u.x,this.y*u.y,this.z*u.z,this.w*u.w)},t.prototype.multiplyToRef=function(u,y){return y.x=this.x*u.x,y.y=this.y*u.y,y.z=this.z*u.z,y.w=this.w*u.w,this},t.prototype.multiplyByFloats=function(u,y,m,b){return new t(this.x*u,this.y*y,this.z*m,this.w*b)},t.prototype.divide=function(u){return new t(this.x/u.x,this.y/u.y,this.z/u.z,this.w/u.w)},t.prototype.divideToRef=function(u,y){return y.x=this.x/u.x,y.y=this.y/u.y,y.z=this.z/u.z,y.w=this.w/u.w,this},t.prototype.divideInPlace=function(u){return this.divideToRef(u,this)},t.prototype.minimizeInPlace=function(u){return u.x<this.x&&(this.x=u.x),u.y<this.y&&(this.y=u.y),u.z<this.z&&(this.z=u.z),u.w<this.w&&(this.w=u.w),this},t.prototype.maximizeInPlace=function(u){return u.x>this.x&&(this.x=u.x),u.y>this.y&&(this.y=u.y),u.z>this.z&&(this.z=u.z),u.w>this.w&&(this.w=u.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var u=this.length();return 0===u?this:this.scaleInPlace(1/u)},t.prototype.toVector3=function(){return new _.Vector3(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(u){return this.x=u.x,this.y=u.y,this.z=u.z,this.w=u.w,this},t.prototype.copyFromFloats=function(u,y,m,b){return this.x=u,this.y=y,this.z=m,this.w=b,this},t.prototype.set=function(u,y,m,b){return this.copyFromFloats(u,y,m,b)},t.prototype.setAll=function(u){return this.x=this.y=this.z=this.w=u,this},t}();y.Vector4=C},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=function(){function t(u){this._radians=u,this._radians<0&&(this._radians+=2*Math.PI)}return t.BetweenTwoPoints=function(u,y){var m=y.subtract(u);return new t(Math.atan2(m.y,m.x))},t.FromRadians=function(u){return new t(u)},t.FromDegrees=function(u){return new t(u*Math.PI/180)},t.prototype.degrees=function(){return 180*this._radians/Math.PI},t.prototype.radians=function(){return this._radians},t}();y.Angle=b},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(22),g=m(15),_=m(2);y.Arc2=function(u,y,m){this.startPoint=u,this.midPoint=y,this.endPoint=m;var C=Math.pow(y.x,2)+Math.pow(y.y,2),x=(Math.pow(u.x,2)+Math.pow(u.y,2)-C)/2,w=(C-Math.pow(m.x,2)-Math.pow(m.y,2))/2,O=(u.x-y.x)*(y.y-m.y)-(y.x-m.x)*(u.y-y.y);this.centerPoint=new g.Vector2((x*(y.y-m.y)-w*(u.y-y.y))/O,((u.x-y.x)*w-(y.x-m.x)*x)/O),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=b.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);var T=this.startAngle.degrees(),R=b.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),A=b.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();R-T>180&&(R-=360),R-T<-180&&(R+=360),A-R>180&&(A-=360),A-R<-180&&(A+=360),this.orientation=R-T<0?_.Orientation.CW:_.Orientation.CCW,this.angle=b.Angle.FromDegrees(this.orientation===_.Orientation.CW?T-A:A-T)}},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(6),g=m(2),_=function(){function t(u,y,m,b){void 0===u&&(u=0),void 0===y&&(y=0),void 0===m&&(m=0),void 0===b&&(b=1),this.r=u,this.g=y,this.b=m,this.a=b}return t.FromHexString=function(u){if("#"!==u.substring(0,1)||9!==u.length)return new t(0,0,0,0);var y=parseInt(u.substring(1,3),16),m=parseInt(u.substring(3,5),16),b=parseInt(u.substring(5,7),16),g=parseInt(u.substring(7,9),16);return t.FromInts(y,m,b,g)},t.Lerp=function(u,y,m){var b=new t(0,0,0,0);return t.LerpToRef(u,y,m,b),b},t.LerpToRef=function(u,y,m,b){b.r=u.r+(y.r-u.r)*m,b.g=u.g+(y.g-u.g)*m,b.b=u.b+(y.b-u.b)*m,b.a=u.a+(y.a-u.a)*m},t.Red=function(){return new t(1,0,0,1)},t.Green=function(){return new t(0,1,0,1)},t.Blue=function(){return new t(0,0,1,1)},t.Black=function(){return new t(0,0,0,1)},t.White=function(){return new t(1,1,1,1)},t.Purple=function(){return new t(.5,0,.5,1)},t.Magenta=function(){return new t(1,0,1,1)},t.Yellow=function(){return new t(1,1,0,1)},t.Gray=function(){return new t(.5,.5,.5,1)},t.Teal=function(){return new t(0,1,1,1)},t.Clear=function(){return new t(0,0,0,0)},t.FromColor3=function(u,y){return void 0===y&&(y=1),new t(u.r,u.g,u.b,y)},t.FromArray=function(u,y){return void 0===y&&(y=0),new t(u[y],u[y+1],u[y+2],u[y+3])},t.FromInts=function(u,y,m,b){return new t(u/255,y/255,m/255,b/255)},t.CheckColors4=function(u,y){if(u.length===3*y){for(var m=[],b=0;b<u.length;b+=3){var g=b/3*4;m[g]=u[b],m[g+1]=u[b+1],m[g+2]=u[b+2],m[g+3]=1}return m}return u},t.prototype.addInPlace=function(u){return this.r+=u.r,this.g+=u.g,this.b+=u.b,this.a+=u.a,this},t.prototype.asArray=function(){var u=new Array;return this.toArray(u,0),u},t.prototype.toArray=function(u,y){return void 0===y&&(y=0),u[y]=this.r,u[y+1]=this.g,u[y+2]=this.b,u[y+3]=this.a,this},t.prototype.add=function(u){return new t(this.r+u.r,this.g+u.g,this.b+u.b,this.a+u.a)},t.prototype.subtract=function(u){return new t(this.r-u.r,this.g-u.g,this.b-u.b,this.a-u.a)},t.prototype.subtractToRef=function(u,y){return y.r=this.r-u.r,y.g=this.g-u.g,y.b=this.b-u.b,y.a=this.a-u.a,this},t.prototype.scale=function(u){return new t(this.r*u,this.g*u,this.b*u,this.a*u)},t.prototype.scaleToRef=function(u,y){return y.r=this.r*u,y.g=this.g*u,y.b=this.b*u,y.a=this.a*u,this},t.prototype.scaleAndAddToRef=function(u,y){return y.r+=this.r*u,y.g+=this.g*u,y.b+=this.b*u,y.a+=this.a*u,this},t.prototype.clampToRef=function(u,y,m){return void 0===u&&(u=0),void 0===y&&(y=1),m.r=b.Scalar.Clamp(this.r,u,y),m.g=b.Scalar.Clamp(this.g,u,y),m.b=b.Scalar.Clamp(this.b,u,y),m.a=b.Scalar.Clamp(this.a,u,y),this},t.prototype.multiply=function(u){return new t(this.r*u.r,this.g*u.g,this.b*u.b,this.a*u.a)},t.prototype.multiplyToRef=function(u,y){return y.r=this.r*u.r,y.g=this.g*u.g,y.b=this.b*u.b,y.a=this.a*u.a,y},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},t.prototype.getClassName=function(){return"Color4"},t.prototype.getHashCode=function(){var u=this.r||0;return 397*(u=397*(u=397*u^(this.g||0))^(this.b||0))^(this.a||0)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copyFrom=function(u){return this.r=u.r,this.g=u.g,this.b=u.b,this.a=u.a,this},t.prototype.copyFromFloats=function(u,y,m,b){return this.r=u,this.g=y,this.b=m,this.a=b,this},t.prototype.set=function(u,y,m,b){return this.copyFromFloats(u,y,m,b)},t.prototype.toHexString=function(){var u=255*this.r|0,y=255*this.g|0,m=255*this.b|0,g=255*this.a|0;return"#"+b.Scalar.ToHex(u)+b.Scalar.ToHex(y)+b.Scalar.ToHex(m)+b.Scalar.ToHex(g)},t.prototype.toLinearSpace=function(){var u=new t;return this.toLinearSpaceToRef(u),u},t.prototype.toLinearSpaceToRef=function(u){return u.r=Math.pow(this.r,g.ToLinearSpace),u.g=Math.pow(this.g,g.ToLinearSpace),u.b=Math.pow(this.b,g.ToLinearSpace),u.a=this.a,this},t.prototype.toGammaSpace=function(){var u=new t;return this.toGammaSpaceToRef(u),u},t.prototype.toGammaSpaceToRef=function(u){return u.r=Math.pow(this.r,g.ToGammaSpace),u.g=Math.pow(this.g,g.ToGammaSpace),u.b=Math.pow(this.b,g.ToGammaSpace),u.a=this.a,this},t}();y.Color4=_},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(3),g=m(11),_=m(9),C=function(){function t(u,y,m,g){this.normal=new b.Vector3(u,y,m),this.d=g}return t.FromArray=function(u){return new t(u[0],u[1],u[2],u[3])},t.FromPoints=function(u,y,m){var b=new t(0,0,0,0);return b.copyFromPoints(u,y,m),b},t.FromPositionAndNormal=function(u,y){var m=new t(0,0,0,0);return y.normalize(),m.normal=y,m.d=-(y.x*u.x+y.y*u.y+y.z*u.z),m},t.SignedDistanceToPlaneFromPositionAndNormal=function(u,y,m){var g=-(y.x*u.x+y.y*u.y+y.z*u.z);return b.Vector3.Dot(m,y)+g},t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){return 397*this.normal.getHashCode()^(this.d||0)},t.prototype.normalize=function(){var u=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),y=0;return 0!==u&&(y=1/u),this.normal.x*=y,this.normal.y*=y,this.normal.z*=y,this.d*=y,this},t.prototype.transform=function(u){var y=_.MathTmp.Matrix[0];g.Matrix.TransposeToRef(u,y);var m=y.m,b=this.normal.x,C=this.normal.y,x=this.normal.z,w=this.d;return new t(b*m[0]+C*m[1]+x*m[2]+w*m[3],b*m[4]+C*m[5]+x*m[6]+w*m[7],b*m[8]+C*m[9]+x*m[10]+w*m[11],b*m[12]+C*m[13]+x*m[14]+w*m[15])},t.prototype.dotCoordinate=function(u){return this.normal.x*u.x+this.normal.y*u.y+this.normal.z*u.z+this.d},t.prototype.copyFromPoints=function(u,y,m){var b,g=y.x-u.x,_=y.y-u.y,C=y.z-u.z,x=m.x-u.x,w=m.y-u.y,O=m.z-u.z,T=_*O-C*w,R=C*x-g*O,A=g*w-_*x,E=Math.sqrt(T*T+R*R+A*A);return b=0!==E?1/E:0,this.normal.x=T*b,this.normal.y=R*b,this.normal.z=A*b,this.d=-(this.normal.x*u.x+this.normal.y*u.y+this.normal.z*u.z),this},t.prototype.isFrontFacingTo=function(u,y){return b.Vector3.Dot(this.normal,u)<=y},t.prototype.signedDistanceTo=function(u){return b.Vector3.Dot(u,this.normal)+this.d},t}();y.Plane=C},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__assign||function(){return(_=Object.assign||function(u){for(var y,m=1,b=arguments.length;m<b;m++)for(var g in y=arguments[m])Object.prototype.hasOwnProperty.call(y,g)&&(u[g]=y[g]);return u}).apply(this,arguments)},C=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var x=m(0),w=m(1),O={looping:!0,speed:1,weight:1},T=function(u){function e(y,m){void 0===m&&(m=O);var b=u.call(this)||this;return b.isAnimationClip=!0,b.looping=O.looping,b.weight=O.weight,b.playing=!1,b.shouldReset=!1,b.speed=O.speed,b.name=w.newId("AnimClip"),b.clip=y,b.setParams(_({},m)),b}return g(e,u),e.prototype.setParams=function(u){return this.looping=void 0!==u.looping?u.looping:this.looping,this.speed=u.speed||this.speed,this},e.prototype.toJSON=function(){var y=JSON.parse(JSON.stringify(u.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),y},e.prototype.play=function(){this.playing=!0},e.prototype.pause=function(){this.playing=!1},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){this.reset(),this.pause()},C([x.ObservableComponent.readonly],e.prototype,"clip",void 0),C([x.ObservableComponent.field],e.prototype,"looping",void 0),C([x.ObservableComponent.field],e.prototype,"weight",void 0),C([x.ObservableComponent.field],e.prototype,"playing",void 0),C([x.ObservableComponent.field],e.prototype,"shouldReset",void 0),C([x.ObservableComponent.field],e.prototype,"speed",void 0),C([x.ObservableComponent.readonly],e.prototype,"name",void 0),e}(x.ObservableComponent);y.AnimationState=T},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),function(u){u[u.DOWN=0]="DOWN",u[u.UP=1]="UP"}(y.InputEventType||(y.InputEventType={})),y.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE"},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b,g=m(5),_=m(1),C=m(29);!function(u){u.HitFirst="rqhf",u.HitAll="rqha"}(b||(b={}));var x=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!0,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(u){var y=C.Camera.instance.rotation,m=g.Matrix.Identity();y.toRotationMatrix(m);var b=g.Vector3.TransformCoordinates(g.Vector3.Forward(),m);return{origin:C.Camera.instance.position,direction:b,distance:u}},t.prototype.getRayFromPositions=function(u,y){var m=y.subtract(u),b=m.length();return{origin:u,direction:m.normalize(),distance:b}},t.prototype.hitFirst=function(u,y,m){var g="number"==typeof m?b.HitFirst+m:_.uuid();this.queries[g]=y,dcl&&dcl.query("raycast",{queryId:g,queryType:"HitFirst",ray:u})},t.prototype.hitAll=function(u,y,m){var g="number"==typeof m?b.HitAll+m:_.uuid();this.queries[g]=y,dcl&&dcl.query("raycast",{queryId:g,queryType:"HitAll",ray:u})},t.prototype.hitFirstAvatar=function(u,y){_.log("not implemented yet")},t.prototype.hitAllAvatars=function(u,y){_.log("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(u){this.queries[u.payload.queryId](u.payload.payload),delete this.queries[u.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(u){this.queries[u.payload.queryId](u.payload.payload),delete this.queries[u.payload.queryId]},t}();y.PhysicsCast=x},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(5),g=function(){function t(){var u=this;this.position=new b.Vector3,this.rotation=new b.Quaternion,this.feetPosition=new b.Vector3,this.worldPosition=new b.Vector3,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.onEvent((function(y){switch(y.type){case"positionChanged":u.positionChanged(y.data);break;case"rotationChanged":u.rotationChanged(y.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return u.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return u.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return u.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return u.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return u.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return u.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return u.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return u.lastEventPosition.y-u.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return u.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return u.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return u.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return u.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return u.lastEventRotation.w}})}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!0,configurable:!0}),t.prototype.positionChanged=function(u){this.lastEventPosition=u.position,this.lastEventWorldPosition=u.cameraPosition,this._playerHeight=u.playerHeight},t.prototype.rotationChanged=function(u){this.lastEventRotation=u.quaternion},t}();y.Camera=g},function(u,y,m){"use strict";function o(u){for(var m in u)y.hasOwnProperty(m)||(y[m]=u[m])}Object.defineProperty(y,"__esModule",{value:!0}),o(m(31)),o(m(17)),o(m(0)),o(m(12)),o(m(7)),o(m(19)),o(m(1)),o(m(20)),o(m(18)),o(m(8)),o(m(33)),o(m(34));var b=m(35),g=m(17),_=new(m(12).Entity)("scene");_.uuid="0";var C=new g.Engine(_);y.engine=C,m(0).DisposableComponent.engine=C,"undefined"!=typeof dcl&&C.addSystem(new b.DecentralandSynchronizationSystem(dcl),1/0);var x=m(14);C.addSystem(x.uuidEventSystem),C.addSystem(x.pointerEventSystem),C.addSystem(x.raycastEventSystem),o(m(27)),o(m(4)),o(m(14)),o(m(13)),o(m(29)),o(m(5)),o(m(26)),o(m(16)),o(m(44)),o(m(45)),o(m(46)),o(m(47)),o(m(48)),o(m(49)),o(m(28))},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=function(){function t(){}return t.AVATAR_POSITION={getEntityRepresentation:function(u){return u.avatarEntity}},t.PLAYER={getEntityRepresentation:function(u){return u.playerEntity}},t}();y.Attachable=b},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(0),g=function(){function t(){for(var u=[],y=0;y<arguments.length;y++)u[y]=arguments[y];if(this.entities=[],this.active=!1,this._requiresNames=[],!u)throw new Error("ComponentGroup: Could not load the requires list");if(!(u instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return u.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(y){var g=u[y],_=null;if(!g)throw new Error("ComponentGroup: the required component at location "+y+" is invalid");try{_=b.getComponentName(g)}catch(u){throw new Error("ComponentGroup: the required component at location "+y+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(m._requiresNames.some((function(u){return u===_})))throw new Error("ComponentGroup: the required component list has a repeated name "+_);m._requiresNames.push(_)},m=this,g=0;g<u.length;g++)n(g)}return t.prototype.hasEntity=function(u){return!!u.isAddedToEngine()&&-1!==this.entities.indexOf(u)},t.prototype.addEntity=function(u){if(!u.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(u)&&this.entities.push(u)},t.prototype.removeEntity=function(u){var y=this.entities.indexOf(u);-1!==y&&this.entities.splice(y,1)},t.prototype.componentRemoved=function(u,y){-1!==this._requiresNames.indexOf(y)&&this.removeEntity(u)},t.prototype.meetsRequirements=function(u){for(var y=0;y<this._requiresNames.length;y++)if(!(this._requiresNames[y]in u.components))return!1;return!0},t}();y.ComponentGroup=g},function(u,y,m){"use strict";var b;Object.defineProperty(y,"__esModule",{value:!0}),y.teleportTo=function(u){var y;y=[u],void 0===b&&"undefined"!=typeof dcl&&(b=dcl.loadModule("@decentraland/UserActionModule")),void 0!==b&&"undefined"!=typeof dcl&&b.then((function(u){dcl.callRpc(u.rpcHandle,"requestTeleport",y)}))}},function(u,y,m){"use strict";var b;Object.defineProperty(y,"__esModule",{value:!0}),y.movePlayerTo=function(u,y){var m;m=[u,y],void 0===b&&"undefined"!=typeof dcl&&(b=dcl.loadModule("@decentraland/RestrictedActionModule")),void 0!==b&&"undefined"!=typeof dcl&&b.then((function(u){dcl.callRpc(u.rpcHandle,"movePlayerTo",m)}))}},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(0),g=m(7),_=m(13),C=function(){function t(u){this.dcl=u,this.cachedComponents={}}return t.prototype.activate=function(u){var y=this;this.engine=u,u.eventManager.addListener(g.ComponentAdded,this,this.componentAdded),u.eventManager.addListener(g.ComponentRemoved,this,this.componentRemoved),u.eventManager.addListener(b.DisposableComponentCreated,this,this.disposableComponentCreated),u.eventManager.addListener(b.DisposableComponentRemoved,this,this.disposableComponentRemoved),u.eventManager.addListener(b.DisposableComponentUpdated,this,this.disposableComponentUpdated),u.eventManager.addListener(g.ParentChanged,this,this.parentChanged);var m=u.rootEntity.uuid;this.dcl.addEntity(m),this.dcl.onUpdate((function(m){u.update(m),y.presentEntities()})),this.dcl.onEvent((function(y){var m=y.data;switch(y.type){case"uuidEvent":u.eventManager.fireEvent(new _.UUIDEvent(m.uuid,m.payload));break;case"raycastResponse":("HitFirst"===m.queryType||"HitAll"===m.queryType)&&u.eventManager.fireEvent(new _.RaycastResponse(m));break;case"pointerEvent":u.eventManager.fireEvent(new _.PointerEvent(m.payload))}}))},t.prototype.onAddEntity=function(u){if(u&&u.isAddedToEngine()){var y=u.uuid,m=u.getParent();for(var g in this.dcl.addEntity(y),m&&this.dcl.setParent(y,m.uuid),this.cachedComponents[y]={},u.components){var _=u.components[g],C=b.getComponentClassId(_);if(null!==C)if(b.isDisposableComponent(_))this.dcl.attachEntityComponent(u.uuid,g,b.getComponentId(_));else{var x=JSON.stringify(_);this.dcl.updateEntityComponent(y,g,C,x),this.cachedComponents[y][g]=x}}}},t.prototype.onRemoveEntity=function(u){if(u.isAddedToEngine()){var y=u.uuid;this.dcl.removeEntity(y),delete this.cachedComponents[y]}},t.prototype.presentEntities=function(){for(var u in this.engine.entities){var y=this.engine.entities[u];for(var m in y.components){var g=y.components[m],_=b.getComponentClassId(g);if(null!==_&&!b.isDisposableComponent(g)){var C=this.getJsonIfDirty(y.uuid,m,g);C&&(this.dcl.updateEntityComponent(y.uuid,m,_,C),this.clearDirty(y.uuid,m,g,C))}}}for(var x in this.engine.disposableComponents)(g=this.engine.disposableComponents[x])instanceof b.ObservableComponent&&g.dirty&&(this.dcl.componentUpdated(x,JSON.stringify(g)),g.dirty=!1)},t.prototype.componentAdded=function(u){if(u.entity.isAddedToEngine()){var y=u.entity.components[u.componentName];if(b.isDisposableComponent(y))this.dcl.attachEntityComponent(u.entity.uuid,u.componentName,b.getComponentId(y));else if(null!==u.classId){var m=JSON.stringify(y);this.dcl.updateEntityComponent(u.entity.uuid,u.componentName,u.classId,m),this.cachedComponents[u.entity.uuid][u.componentName]=m}}},t.prototype.componentRemoved=function(u){u.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(u.entity.uuid,u.componentName),delete this.cachedComponents[u.entity.uuid][u.componentName])},t.prototype.disposableComponentCreated=function(u){this.dcl.componentCreated(u.componentId,u.componentName,u.classId)},t.prototype.disposableComponentRemoved=function(u){this.dcl.componentDisposed(u.componentId)},t.prototype.disposableComponentUpdated=function(u){this.dcl.componentUpdated(u.componentId,JSON.stringify(u.component))},t.prototype.parentChanged=function(u){this.dcl.setParent(u.entity.uuid,u.parent?u.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(u,y,m){var b=JSON.stringify(m);return b!==this.cachedComponents[u][y]&&b},t.prototype.clearDirty=function(u,y,m,b){this.cachedComponents[u][y]=b},t}();y.DecentralandSynchronizationSystem=C},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(3),g=function(){function t(){}return t.X=new b.Vector3(1,0,0),t.Y=new b.Vector3(0,1,0),t.Z=new b.Vector3(0,0,1),t}();y.Axis=g},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=function(){function t(){}return t.Interpolate=function(u,y,m,b,g){for(var _=1-3*b+3*y,C=3*b-6*y,x=3*y,w=u,O=0;O<5;O++){var T=w*w;w-=1/(3*_*T+2*C*w+x)*(_*(T*w)+C*T+x*w-u),w=Math.min(1,Math.max(0,w))}return 3*Math.pow(1-w,2)*w*m+3*(1-w)*Math.pow(w,2)*g+Math.pow(w,3)},t}();y.BezierCurve=b},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(2),g=m(24),_=m(6),C=function(){function t(u,y,m){void 0===u&&(u=0),void 0===y&&(y=0),void 0===m&&(m=0),this.r=u,this.g=y,this.b=m}return t.FromHexString=function(u){if("#"!==u.substring(0,1)||7!==u.length)return new t(0,0,0);var y=parseInt(u.substring(1,3),16),m=parseInt(u.substring(3,5),16),b=parseInt(u.substring(5,7),16);return t.FromInts(y,m,b)},t.FromArray=function(u,y){return void 0===y&&(y=0),new t(u[y],u[y+1],u[y+2])},t.FromInts=function(u,y,m){return new t(u/255,y/255,m/255)},t.Lerp=function(u,y,m){var b=new t(0,0,0);return t.LerpToRef(u,y,m,b),b},t.LerpToRef=function(u,y,m,b){b.r=u.r+(y.r-u.r)*m,b.g=u.g+(y.g-u.g)*m,b.b=u.b+(y.b-u.b)*m},t.Red=function(){return new t(1,0,0)},t.Green=function(){return new t(0,1,0)},t.Blue=function(){return new t(0,0,1)},t.Black=function(){return new t(0,0,0)},t.White=function(){return new t(1,1,1)},t.Purple=function(){return new t(.5,0,.5)},t.Magenta=function(){return new t(1,0,1)},t.Yellow=function(){return new t(1,1,0)},t.Gray=function(){return new t(.5,.5,.5)},t.Teal=function(){return new t(0,1,1)},t.Random=function(){return new t(Math.random(),Math.random(),Math.random())},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},t.prototype.getClassName=function(){return"Color3"},t.prototype.getHashCode=function(){var u=this.r||0;return 397*(u=397*u^(this.g||0))^(this.b||0)},t.prototype.toArray=function(u,y){return void 0===y&&(y=0),u[y]=this.r,u[y+1]=this.g,u[y+2]=this.b,this},t.prototype.toColor4=function(u){return void 0===u&&(u=1),new g.Color4(this.r,this.g,this.b,u)},t.prototype.asArray=function(){var u=new Array;return this.toArray(u,0),u},t.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},t.prototype.multiply=function(u){return new t(this.r*u.r,this.g*u.g,this.b*u.b)},t.prototype.multiplyToRef=function(u,y){return y.r=this.r*u.r,y.g=this.g*u.g,y.b=this.b*u.b,this},t.prototype.equals=function(u){return u&&this.r===u.r&&this.g===u.g&&this.b===u.b},t.prototype.equalsFloats=function(u,y,m){return this.r===u&&this.g===y&&this.b===m},t.prototype.scale=function(u){return new t(this.r*u,this.g*u,this.b*u)},t.prototype.scaleToRef=function(u,y){return y.r=this.r*u,y.g=this.g*u,y.b=this.b*u,this},t.prototype.scaleAndAddToRef=function(u,y){return y.r+=this.r*u,y.g+=this.g*u,y.b+=this.b*u,this},t.prototype.clampToRef=function(u,y,m){return void 0===u&&(u=0),void 0===y&&(y=1),m.r=_.Scalar.Clamp(this.r,u,y),m.g=_.Scalar.Clamp(this.g,u,y),m.b=_.Scalar.Clamp(this.b,u,y),this},t.prototype.add=function(u){return new t(this.r+u.r,this.g+u.g,this.b+u.b)},t.prototype.addToRef=function(u,y){return y.r=this.r+u.r,y.g=this.g+u.g,y.b=this.b+u.b,this},t.prototype.subtract=function(u){return new t(this.r-u.r,this.g-u.g,this.b-u.b)},t.prototype.subtractToRef=function(u,y){return y.r=this.r-u.r,y.g=this.g-u.g,y.b=this.b-u.b,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b)},t.prototype.copyFrom=function(u){return this.r=u.r,this.g=u.g,this.b=u.b,this},t.prototype.copyFromFloats=function(u,y,m){return this.r=u,this.g=y,this.b=m,this},t.prototype.set=function(u,y,m){return this.copyFromFloats(u,y,m)},t.prototype.toHexString=function(){var u=255*this.r|0,y=255*this.g|0,m=255*this.b|0;return"#"+_.Scalar.ToHex(u)+_.Scalar.ToHex(y)+_.Scalar.ToHex(m)},t.prototype.toLinearSpace=function(){var u=new t;return this.toLinearSpaceToRef(u),u},t.prototype.toLinearSpaceToRef=function(u){return u.r=Math.pow(this.r,b.ToLinearSpace),u.g=Math.pow(this.g,b.ToLinearSpace),u.b=Math.pow(this.b,b.ToLinearSpace),this},t.prototype.toGammaSpace=function(){var u=new t;return this.toGammaSpaceToRef(u),u},t.prototype.toGammaSpaceToRef=function(u){return u.r=Math.pow(this.r,b.ToGammaSpace),u.g=Math.pow(this.g,b.ToGammaSpace),u.b=Math.pow(this.b,b.ToGammaSpace),this},t.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t}();y.Color3=C},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(3),g=function(){function t(u){this._length=0,this._points=u,this._length=this._computeLength(u)}return t.CreateQuadraticBezier=function(u,y,m,g){g=g>2?g:3;for(var _=new Array,a=function(u,y,m,b){return(1-u)*(1-u)*y+2*u*(1-u)*m+u*u*b},C=0;C<=g;C++)_.push(new b.Vector3(a(C/g,u.x,y.x,m.x),a(C/g,u.y,y.y,m.y),a(C/g,u.z,y.z,m.z)));return new t(_)},t.CreateCubicBezier=function(u,y,m,g,_){_=_>3?_:4;for(var C=new Array,p=function(u,y,m,b,g){return(1-u)*(1-u)*(1-u)*y+3*u*(1-u)*(1-u)*m+3*u*u*(1-u)*b+u*u*u*g},x=0;x<=_;x++)C.push(new b.Vector3(p(x/_,u.x,y.x,m.x,g.x),p(x/_,u.y,y.y,m.y,g.y),p(x/_,u.z,y.z,m.z,g.z)));return new t(C)},t.CreateHermiteSpline=function(u,y,m,g,_){for(var C=new Array,x=1/_,w=0;w<=_;w++)C.push(b.Vector3.Hermite(u,y,m,g,w*x));return new t(C)},t.CreateCatmullRomSpline=function(u,y,m){var g=new Array,_=1/y,C=0;if(m){for(var x=u.length,w=0;w<x;w++){C=0;for(var O=0;O<y;O++)g.push(b.Vector3.CatmullRom(u[w%x],u[(w+1)%x],u[(w+2)%x],u[(w+3)%x],C)),C+=_}g.push(g[0])}else{var T=new Array;for(T.push(u[0].clone()),Array.prototype.push.apply(T,u),T.push(u[u.length-1].clone()),w=0,w=0;w<T.length-3;w++)for(C=0,O=0;O<y;O++)g.push(b.Vector3.CatmullRom(T[w],T[w+1],T[w+2],T[w+3],C)),C+=_;w--,g.push(b.Vector3.CatmullRom(T[w],T[w+1],T[w+2],T[w+3],C))}return new t(g)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(u){for(var y=this._points[this._points.length-1],m=this._points.slice(),b=u.getPoints(),g=1;g<b.length;g++)m.push(b[g].subtract(b[0]).add(y));return new t(m)},t.prototype._computeLength=function(u){for(var y=0,m=1;m<u.length;m++)y+=u[m].subtract(u[m-1]).length();return y},t}();y.Curve3=g},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(25),g=function(){function t(){}return t.GetPlanes=function(u){for(var y=[],m=0;m<6;m++)y.push(new b.Plane(0,0,0,0));return t.GetPlanesToRef(u,y),y},t.GetNearPlaneToRef=function(u,y){var m=u.m;y.normal.x=m[3]+m[2],y.normal.y=m[7]+m[6],y.normal.z=m[11]+m[10],y.d=m[15]+m[14],y.normalize()},t.GetFarPlaneToRef=function(u,y){var m=u.m;y.normal.x=m[3]-m[2],y.normal.y=m[7]-m[6],y.normal.z=m[11]-m[10],y.d=m[15]-m[14],y.normalize()},t.GetLeftPlaneToRef=function(u,y){var m=u.m;y.normal.x=m[3]+m[0],y.normal.y=m[7]+m[4],y.normal.z=m[11]+m[8],y.d=m[15]+m[12],y.normalize()},t.GetRightPlaneToRef=function(u,y){var m=u.m;y.normal.x=m[3]-m[0],y.normal.y=m[7]-m[4],y.normal.z=m[11]-m[8],y.d=m[15]-m[12],y.normalize()},t.GetTopPlaneToRef=function(u,y){var m=u.m;y.normal.x=m[3]-m[1],y.normal.y=m[7]-m[5],y.normal.z=m[11]-m[9],y.d=m[15]-m[13],y.normalize()},t.GetBottomPlaneToRef=function(u,y){var m=u.m;y.normal.x=m[3]+m[1],y.normal.y=m[7]+m[5],y.normal.z=m[11]+m[9],y.d=m[15]+m[13],y.normalize()},t.GetPlanesToRef=function(u,y){t.GetNearPlaneToRef(u,y[0]),t.GetFarPlaneToRef(u,y[1]),t.GetLeftPlaneToRef(u,y[2]),t.GetRightPlaneToRef(u,y[3]),t.GetTopPlaneToRef(u,y[4]),t.GetBottomPlaneToRef(u,y[5])},t}();y.Frustum=g},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(15),g=m(23),_=m(2),C=function(){function t(u,y){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new b.Vector2(u,y))}return t.StartingAt=function(u,y){return new t(u,y)},t.prototype.addLineTo=function(u,y){if(this.closed)return this;var m=new b.Vector2(u,y),g=this._points[this._points.length-1];return this._points.push(m),this._length+=m.subtract(g).length(),this},t.prototype.addArcTo=function(u,y,m,C,x){if(void 0===x&&(x=36),this.closed)return this;var w=this._points[this._points.length-1],O=new b.Vector2(u,y),T=new b.Vector2(m,C),R=new g.Arc2(w,O,T),A=R.angle.radians()/x;R.orientation===_.Orientation.CW&&(A*=-1);for(var E=R.startAngle.radians()+A,P=0;P<x;P++){var S=Math.cos(E)*R.radius+R.centerPoint.x,I=Math.sin(E)*R.radius+R.centerPoint.y;this.addLineTo(S,I),E+=A}return this},t.prototype.close=function(){return this.closed=!0,this},t.prototype.length=function(){var u=this._length;if(!this.closed){var y=this._points[this._points.length-1];u+=this._points[0].subtract(y).length()}return u},t.prototype.getPoints=function(){return this._points},t.prototype.getPointAtLengthPosition=function(u){if(u<0||u>1)return b.Vector2.Zero();for(var y=u*this.length(),m=0,g=0;g<this._points.length;g++){var _=(g+1)%this._points.length,C=this._points[g],x=this._points[_].subtract(C),w=x.length()+m;if(y>=m&&y<=w){var O=x.normalize(),T=y-m;return new b.Vector2(C.x+O.x*T,C.y+O.y*T)}m=w}return b.Vector2.Zero()},t}();y.Path2=C},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(3),g=m(2),_=m(6),C=function(){function t(u,y,m){void 0===y&&(y=null),this.path=u,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var b=0;b<u.length;b++)this._curve[b]=u[b].clone();this._raw=m||!1,this._compute(y)}return t.prototype.getCurve=function(){return this._curve},t.prototype.getTangents=function(){return this._tangents},t.prototype.getNormals=function(){return this._normals},t.prototype.getBinormals=function(){return this._binormals},t.prototype.getDistances=function(){return this._distances},t.prototype.update=function(u,y){void 0===y&&(y=null);for(var m=0;m<u.length;m++)this._curve[m].x=u[m].x,this._curve[m].y=u[m].y,this._curve[m].z=u[m].z;return this._compute(y),this},t.prototype._compute=function(u){var y=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[y-1]=this._curve[y-1].subtract(this._curve[y-2]),this._raw||this._tangents[y-1].normalize();var m,g,_,C,x=this._tangents[0],w=this._normalVector(this._curve[0],x,u);this._normals[0]=w,this._raw||this._normals[0].normalize(),this._binormals[0]=b.Vector3.Cross(x,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var O=1;O<y;O++)m=this._getLastNonNullVector(O),O<y-1&&(g=this._getFirstNonNullVector(O),this._tangents[O]=m.add(g),this._tangents[O].normalize()),this._distances[O]=this._distances[O-1]+m.length(),_=this._tangents[O],C=this._binormals[O-1],this._normals[O]=b.Vector3.Cross(C,_),this._raw||this._normals[O].normalize(),this._binormals[O]=b.Vector3.Cross(_,this._normals[O]),this._raw||this._binormals[O].normalize()},t.prototype._getFirstNonNullVector=function(u){for(var y=1,m=this._curve[u+y].subtract(this._curve[u]);0===m.length()&&u+y+1<this._curve.length;)y++,m=this._curve[u+y].subtract(this._curve[u]);return m},t.prototype._getLastNonNullVector=function(u){for(var y=1,m=this._curve[u].subtract(this._curve[u-y]);0===m.length()&&u>y+1;)y++,m=this._curve[u].subtract(this._curve[u-y]);return m},t.prototype._normalVector=function(u,y,m){var C,x,w=y.length();(0===w&&(w=1),null==m)?(x=_.Scalar.WithinEpsilon(Math.abs(y.y)/w,1,g.Epsilon)?_.Scalar.WithinEpsilon(Math.abs(y.x)/w,1,g.Epsilon)?_.Scalar.WithinEpsilon(Math.abs(y.z)/w,1,g.Epsilon)?b.Vector3.Zero():new b.Vector3(0,0,1):new b.Vector3(1,0,0):new b.Vector3(0,-1,0),C=b.Vector3.Cross(y,x)):(C=b.Vector3.Cross(y,m),b.Vector3.CrossToRef(C,y,C));return C.normalize(),C},t}();y.Path3D=C},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=function(){function t(u,y){this.width=u,this.height=y}return Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),t.Zero=function(){return new t(0,0)},t.Lerp=function(u,y,m){return new t(u.width+(y.width-u.width)*m,u.height+(y.height-u.height)*m)},t.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){return 397*(this.width||0)^(this.height||0)},t.prototype.copyFrom=function(u){this.width=u.width,this.height=u.height},t.prototype.copyFromFloats=function(u,y){return this.width=u,this.height=y,this},t.prototype.set=function(u,y){return this.copyFromFloats(u,y)},t.prototype.multiplyByFloats=function(u,y){return new t(this.width*u,this.height*y)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(u){return!!u&&this.width===u.width&&this.height===u.height},t.prototype.add=function(u){return new t(this.width+u.width,this.height+u.height)},t.prototype.subtract=function(u){return new t(this.width-u.width,this.height-u.height)},t}();y.Size=b},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var C=m(0),x=m(4),w=function(u){function e(y){var m=u.call(this)||this;return m.loop=!1,m.volume=1,m.url=y,m}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"url",void 0),_([C.ObservableComponent.field],e.prototype,"loop",void 0),_([C.ObservableComponent.field],e.prototype,"loadingCompleteEventId",void 0),_([C.ObservableComponent.field],e.prototype,"volume",void 0),_([C.DisposableComponent("engine.AudioClip",x.CLASS_ID.AUDIO_CLIP)],e)}(C.ObservableComponent);y.AudioClip=w;var O=function(u){function e(y){var m=u.call(this)||this;if(m.audioClip=y,m.loop=!1,m.volume=1,m.playing=!1,m.pitch=1,!(y instanceof w))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return m.audioClipId=C.getComponentId(y),m}return g(e,u),e.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.data.nonce=Math.random(),this},_([C.ObservableComponent.readonly],e.prototype,"audioClipId",void 0),_([C.ObservableComponent.field],e.prototype,"loop",void 0),_([C.ObservableComponent.field],e.prototype,"volume",void 0),_([C.ObservableComponent.field],e.prototype,"playing",void 0),_([C.ObservableComponent.field],e.prototype,"pitch",void 0),_([C.Component("engine.AudioSource",x.CLASS_ID.AUDIO_SOURCE)],e)}(C.ObservableComponent);y.AudioSource=O;var T=function(u){function e(y){var m=u.call(this)||this;return m.playing=!1,m.volume=1,m.url=y,m.playing=!0,m}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"url",void 0),_([C.ObservableComponent.field],e.prototype,"playing",void 0),_([C.ObservableComponent.field],e.prototype,"volume",void 0),_([C.Component("engine.AudioStream",x.CLASS_ID.AUDIO_STREAM)],e)}(C.ObservableComponent);y.AudioStream=T},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var C=m(0),x=m(4);!function(u){u.MOVE="MOVE",u.ROTATE="ROTATE",u.SCALE="SCALE",u.NONE="NONE"}(y.Gizmo||(y.Gizmo={}));var w=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.type="gizmoEvent",y}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.gizmoEvent",x.CLASS_ID.UUID_CALLBACK)],e)}(x.OnUUIDEvent);y.OnGizmoEvent=w;var O=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.position=!0,y.rotation=!0,y.scale=!0,y.cycle=!0,y.localReference=!1,y}return g(e,u),_([C.ObservableComponent.field],e.prototype,"position",void 0),_([C.ObservableComponent.field],e.prototype,"rotation",void 0),_([C.ObservableComponent.field],e.prototype,"scale",void 0),_([C.ObservableComponent.field],e.prototype,"cycle",void 0),_([C.ObservableComponent.field],e.prototype,"selectedGizmo",void 0),_([C.ObservableComponent.field],e.prototype,"localReference",void 0),_([C.Component("engine.gizmos",x.CLASS_ID.GIZMOS)],e)}(C.ObservableComponent);y.Gizmos=O},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var C=m(0),x=m(4),w=m(5),O=function(u){function e(y){var m=u.call(this)||this;return m.name=null,m.visible=!0,m.opacity=1,m.hAlign="center",m.vAlign="center",m.width="100px",m.height="50px",m.positionX="0px",m.positionY="0px",m.isPointerBlocker=!0,y&&(m._parent=y,m.data.parentComponent=C.getComponentId(y)),m}return g(e,u),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!0,configurable:!0}),_([C.ObservableComponent.field],e.prototype,"name",void 0),_([C.ObservableComponent.field],e.prototype,"visible",void 0),_([C.ObservableComponent.field],e.prototype,"opacity",void 0),_([C.ObservableComponent.field],e.prototype,"hAlign",void 0),_([C.ObservableComponent.field],e.prototype,"vAlign",void 0),_([C.ObservableComponent.uiValue],e.prototype,"width",void 0),_([C.ObservableComponent.uiValue],e.prototype,"height",void 0),_([C.ObservableComponent.uiValue],e.prototype,"positionX",void 0),_([C.ObservableComponent.uiValue],e.prototype,"positionY",void 0),_([C.ObservableComponent.field],e.prototype,"isPointerBlocker",void 0),e}(C.ObservableComponent);y.UIShape=O;var T=function(u){function e(){return u.call(this,null)||this}return g(e,u),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_FULLSCREEN_SHAPE)],e)}(O);y.UIFullScreen=T;var R=function(u){function e(){return u.call(this,null)||this}return g(e,u),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_WORLD_SPACE_SHAPE)],e)}(O);y.UIWorldSpace=R;var A=function(u){function e(){return u.call(this,null)||this}return g(e,u),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_SCREEN_SPACE_SHAPE)],e)}(O);y.UICanvas=A;var E,P=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.adaptWidth=!1,y.adaptHeight=!1,y.thickness=0,y.color=w.Color4.Clear(),y.alignmentUsesSize=!0,y}return g(e,u),_([C.ObservableComponent.field],e.prototype,"adaptWidth",void 0),_([C.ObservableComponent.field],e.prototype,"adaptHeight",void 0),_([C.ObservableComponent.field],e.prototype,"thickness",void 0),_([C.ObservableComponent.field],e.prototype,"color",void 0),_([C.ObservableComponent.field],e.prototype,"alignmentUsesSize",void 0),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_CONTAINER_RECT)],e)}(O);y.UIContainerRect=P,function(u){u[u.VERTICAL=0]="VERTICAL",u[u.HORIZONTAL=1]="HORIZONTAL"}(E=y.UIStackOrientation||(y.UIStackOrientation={}));var S=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.adaptWidth=!0,y.adaptHeight=!0,y.color=w.Color4.Clear(),y.stackOrientation=E.VERTICAL,y.spacing=0,y}return g(e,u),_([C.ObservableComponent.field],e.prototype,"adaptWidth",void 0),_([C.ObservableComponent.field],e.prototype,"adaptHeight",void 0),_([C.ObservableComponent.field],e.prototype,"color",void 0),_([C.ObservableComponent.field],e.prototype,"stackOrientation",void 0),_([C.ObservableComponent.field],e.prototype,"spacing",void 0),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_CONTAINER_STACK)],e)}(O);y.UIContainerStack=S;var I=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.fontSize=10,y.fontWeight="normal",y.thickness=0,y.cornerRadius=0,y.color=w.Color4.White(),y.background=w.Color4.White(),y.paddingTop=0,y.paddingRight=0,y.paddingBottom=0,y.paddingLeft=0,y.shadowBlur=0,y.shadowOffsetX=0,y.shadowOffsetY=0,y.shadowColor=w.Color4.Black(),y.text="button",y}return g(e,u),_([C.ObservableComponent.field],e.prototype,"fontSize",void 0),_([C.ObservableComponent.field],e.prototype,"fontWeight",void 0),_([C.ObservableComponent.field],e.prototype,"thickness",void 0),_([C.ObservableComponent.field],e.prototype,"cornerRadius",void 0),_([C.ObservableComponent.field],e.prototype,"color",void 0),_([C.ObservableComponent.field],e.prototype,"background",void 0),_([C.ObservableComponent.field],e.prototype,"paddingTop",void 0),_([C.ObservableComponent.field],e.prototype,"paddingRight",void 0),_([C.ObservableComponent.field],e.prototype,"paddingBottom",void 0),_([C.ObservableComponent.field],e.prototype,"paddingLeft",void 0),_([C.ObservableComponent.field],e.prototype,"shadowBlur",void 0),_([C.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),_([C.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),_([C.ObservableComponent.field],e.prototype,"shadowColor",void 0),_([C.ObservableComponent.field],e.prototype,"text",void 0),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_BUTTON_SHAPE)],e)}(O);y.UIButton=I;var z=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.outlineWidth=0,y.outlineColor=w.Color4.White(),y.color=w.Color4.White(),y.fontSize=10,y.fontAutoSize=!1,y.fontWeight="normal",y.value="",y.lineSpacing=0,y.lineCount=0,y.adaptWidth=!1,y.adaptHeight=!1,y.textWrapping=!1,y.shadowBlur=0,y.shadowOffsetX=0,y.shadowOffsetY=0,y.shadowColor=w.Color4.Black(),y.hTextAlign="left",y.vTextAlign="bottom",y.paddingTop=0,y.paddingRight=0,y.paddingBottom=0,y.paddingLeft=0,y}return g(e,u),_([C.ObservableComponent.field],e.prototype,"outlineWidth",void 0),_([C.ObservableComponent.field],e.prototype,"outlineColor",void 0),_([C.ObservableComponent.field],e.prototype,"color",void 0),_([C.ObservableComponent.field],e.prototype,"fontSize",void 0),_([C.ObservableComponent.field],e.prototype,"fontAutoSize",void 0),_([C.ObservableComponent.field],e.prototype,"fontWeight",void 0),_([C.ObservableComponent.component],e.prototype,"font",void 0),_([C.ObservableComponent.field],e.prototype,"value",void 0),_([C.ObservableComponent.field],e.prototype,"lineSpacing",void 0),_([C.ObservableComponent.field],e.prototype,"lineCount",void 0),_([C.ObservableComponent.field],e.prototype,"adaptWidth",void 0),_([C.ObservableComponent.field],e.prototype,"adaptHeight",void 0),_([C.ObservableComponent.field],e.prototype,"textWrapping",void 0),_([C.ObservableComponent.field],e.prototype,"shadowBlur",void 0),_([C.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),_([C.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),_([C.ObservableComponent.field],e.prototype,"shadowColor",void 0),_([C.ObservableComponent.field],e.prototype,"hTextAlign",void 0),_([C.ObservableComponent.field],e.prototype,"vTextAlign",void 0),_([C.ObservableComponent.field],e.prototype,"paddingTop",void 0),_([C.ObservableComponent.field],e.prototype,"paddingRight",void 0),_([C.ObservableComponent.field],e.prototype,"paddingBottom",void 0),_([C.ObservableComponent.field],e.prototype,"paddingLeft",void 0),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_TEXT_SHAPE)],e)}(O);y.UIText=z;var M=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.outlineWidth=0,y.outlineColor=w.Color4.Black(),y.color=w.Color4.Clear(),y.thickness=1,y.fontSize=10,y.fontWeight="normal",y.value="",y.placeholderColor=w.Color4.White(),y.placeholder="",y.margin=10,y.maxWidth=100,y.hTextAlign="left",y.vTextAlign="bottom",y.autoStretchWidth=!0,y.background=w.Color4.Black(),y.focusedBackground=w.Color4.Black(),y.textWrapping=!1,y.shadowBlur=0,y.shadowOffsetX=0,y.shadowOffsetY=0,y.shadowColor=w.Color4.White(),y.paddingTop=0,y.paddingRight=0,y.paddingBottom=0,y.paddingLeft=0,y.onTextSubmit=null,y.onChanged=null,y.onFocus=null,y.onBlur=null,y}return g(e,u),_([C.ObservableComponent.field],e.prototype,"outlineWidth",void 0),_([C.ObservableComponent.field],e.prototype,"outlineColor",void 0),_([C.ObservableComponent.field],e.prototype,"color",void 0),_([C.ObservableComponent.field],e.prototype,"thickness",void 0),_([C.ObservableComponent.field],e.prototype,"fontSize",void 0),_([C.ObservableComponent.field],e.prototype,"fontWeight",void 0),_([C.ObservableComponent.component],e.prototype,"font",void 0),_([C.ObservableComponent.field],e.prototype,"value",void 0),_([C.ObservableComponent.field],e.prototype,"placeholderColor",void 0),_([C.ObservableComponent.field],e.prototype,"placeholder",void 0),_([C.ObservableComponent.field],e.prototype,"margin",void 0),_([C.ObservableComponent.field],e.prototype,"maxWidth",void 0),_([C.ObservableComponent.field],e.prototype,"hTextAlign",void 0),_([C.ObservableComponent.field],e.prototype,"vTextAlign",void 0),_([C.ObservableComponent.field],e.prototype,"autoStretchWidth",void 0),_([C.ObservableComponent.field],e.prototype,"background",void 0),_([C.ObservableComponent.field],e.prototype,"focusedBackground",void 0),_([C.ObservableComponent.field],e.prototype,"textWrapping",void 0),_([C.ObservableComponent.field],e.prototype,"shadowBlur",void 0),_([C.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),_([C.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),_([C.ObservableComponent.field],e.prototype,"shadowColor",void 0),_([C.ObservableComponent.field],e.prototype,"paddingTop",void 0),_([C.ObservableComponent.field],e.prototype,"paddingRight",void 0),_([C.ObservableComponent.field],e.prototype,"paddingBottom",void 0),_([C.ObservableComponent.field],e.prototype,"paddingLeft",void 0),_([x.OnUUIDEvent.uuidEvent],e.prototype,"onTextSubmit",void 0),_([x.OnUUIDEvent.uuidEvent],e.prototype,"onChanged",void 0),_([x.OnUUIDEvent.uuidEvent],e.prototype,"onFocus",void 0),_([x.OnUUIDEvent.uuidEvent],e.prototype,"onBlur",void 0),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_INPUT_TEXT_SHAPE)],e)}(O);y.UIInputText=M;var F=function(u){function e(y,m){var b=u.call(this,y)||this;return b.sourceLeft=0,b.sourceTop=0,b.sourceWidth=1,b.sourceHeight=1,b.paddingTop=0,b.paddingRight=0,b.paddingBottom=0,b.paddingLeft=0,b.sizeInPixels=!0,b.onClick=null,b.source=m,b}return g(e,u),_([C.ObservableComponent.field],e.prototype,"sourceLeft",void 0),_([C.ObservableComponent.field],e.prototype,"sourceTop",void 0),_([C.ObservableComponent.field],e.prototype,"sourceWidth",void 0),_([C.ObservableComponent.field],e.prototype,"sourceHeight",void 0),_([C.ObservableComponent.component],e.prototype,"source",void 0),_([C.ObservableComponent.field],e.prototype,"paddingTop",void 0),_([C.ObservableComponent.field],e.prototype,"paddingRight",void 0),_([C.ObservableComponent.field],e.prototype,"paddingBottom",void 0),_([C.ObservableComponent.field],e.prototype,"paddingLeft",void 0),_([C.ObservableComponent.field],e.prototype,"sizeInPixels",void 0),_([x.OnUUIDEvent.uuidEvent],e.prototype,"onClick",void 0),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_IMAGE_SHAPE)],e)}(O);y.UIImage=F;var D=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.valueX=0,y.valueY=0,y.borderColor=w.Color4.White(),y.backgroundColor=w.Color4.Clear(),y.isHorizontal=!1,y.isVertical=!1,y.paddingTop=0,y.paddingRight=0,y.paddingBottom=0,y.paddingLeft=0,y.onChanged=null,y}return g(e,u),_([C.ObservableComponent.field],e.prototype,"valueX",void 0),_([C.ObservableComponent.field],e.prototype,"valueY",void 0),_([C.ObservableComponent.field],e.prototype,"borderColor",void 0),_([C.ObservableComponent.field],e.prototype,"backgroundColor",void 0),_([C.ObservableComponent.field],e.prototype,"isHorizontal",void 0),_([C.ObservableComponent.field],e.prototype,"isVertical",void 0),_([C.ObservableComponent.field],e.prototype,"paddingTop",void 0),_([C.ObservableComponent.field],e.prototype,"paddingRight",void 0),_([C.ObservableComponent.field],e.prototype,"paddingBottom",void 0),_([C.ObservableComponent.field],e.prototype,"paddingLeft",void 0),_([x.OnUUIDEvent.uuidEvent],e.prototype,"onChanged",void 0),_([C.DisposableComponent("engine.shape",x.CLASS_ID.UI_SLIDER_SHAPE)],e)}(O);y.UIScrollRect=D},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var C=m(0),x=m(4),w=function(u){function e(){var y=null!==u&&u.apply(this,arguments)||this;return y.useDummyModel=!1,y}var y;return g(e,u),y=e,e.Dummy=function(){var u=new y;return u.useDummyModel=!0,u},_([C.ObservableComponent.field],e.prototype,"id",void 0),_([C.ObservableComponent.field],e.prototype,"name",void 0),_([C.ObservableComponent.field],e.prototype,"expressionTriggerId",void 0),_([C.ObservableComponent.field],e.prototype,"expressionTriggerTimestamp",void 0),_([C.ObservableComponent.field],e.prototype,"bodyShape",void 0),_([C.ObservableComponent.field],e.prototype,"wearables",void 0),_([C.ObservableComponent.field],e.prototype,"skinColor",void 0),_([C.ObservableComponent.field],e.prototype,"hairColor",void 0),_([C.ObservableComponent.field],e.prototype,"eyeColor",void 0),_([C.ObservableComponent.field],e.prototype,"useDummyModel",void 0),y=_([C.Component("engine.avatarShape",x.CLASS_ID.AVATAR_SHAPE)],e)}(C.ObservableComponent);y.AvatarShape=w},function(u,y,m){"use strict";var b,g=this&&this.__extends||(b=function(u,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])})(u,y)},function(u,y){function n(){this.constructor=u}b(u,y),u.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),_=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C};Object.defineProperty(y,"__esModule",{value:!0});var C=m(0),x=m(14),w=m(4),O=function(u){function e(y){var m=u.call(this,y)||this;return m.type="onFocus",x.uuidEventSystem.handlerMap[m.uuid]=m,m}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.onFocus",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnUUIDEvent);y.OnFocus=O;var T=function(u){function e(y){var m=u.call(this,y)||this;return m.type="onTextSubmit",x.uuidEventSystem.handlerMap[m.uuid]=m,m}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.onTextSubmit",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnUUIDEvent);y.OnTextSubmit=T;var R=function(u){function e(y){var m=u.call(this,y)||this;return m.type="onBlur",x.uuidEventSystem.handlerMap[m.uuid]=m,m}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.onBlur",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnUUIDEvent);y.OnBlur=R;var A=function(u){function e(y){var m=u.call(this,y)||this;return m.type="onEnter",x.uuidEventSystem.handlerMap[m.uuid]=m,m}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.onEnter",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnUUIDEvent);y.OnEnter=A;var E=function(u){function e(y){var m=u.call(this,y)||this;return m.type="onChange",x.uuidEventSystem.handlerMap[m.uuid]=m,m}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.onChange",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnUUIDEvent);y.OnChanged=E;var P=function(u){function e(y,m){var b=u.call(this,y)||this;return b.type="onClick",x.uuidEventSystem.handlerMap[b.uuid]=b,m&&(b.showFeedback=!(!1===m.showFeedback),m.button&&(b.button=m.button),m.hoverText&&(b.hoverText=m.hoverText),m.distance&&(b.distance=m.distance)),b}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.onClick",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnPointerUUIDEvent);y.OnClick=P;var S=function(u){function e(y,m){var b=u.call(this,y)||this;return b.type="pointerDown",x.uuidEventSystem.handlerMap[b.uuid]=b,m&&(b.showFeedback=!(!1===m.showFeedback),m.button&&(b.button=m.button),m.hoverText&&(b.hoverText=m.hoverText),m.distance&&(b.distance=m.distance)),b}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.pointerDown",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnPointerUUIDEvent);y.OnPointerDown=S;var I=function(u){function e(y,m){var b=u.call(this,y)||this;return b.type="pointerUp",x.uuidEventSystem.handlerMap[b.uuid]=b,m&&(b.showFeedback=!(!1===m.showFeedback),m.button&&(b.button=m.button),m.hoverText&&(b.hoverText=m.hoverText),m.distance&&(b.distance=m.distance)),b}return g(e,u),_([C.ObservableComponent.readonly],e.prototype,"type",void 0),_([C.Component("engine.pointerUp",w.CLASS_ID.UUID_CALLBACK)],e)}(w.OnPointerUUIDEvent);y.OnPointerUp=I},function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=m(20),g=m(1),_=null,C=null,x=null;function p(){return x||(x=new b.Observable),x}y.getMessageObserver=p;var w=function(){function t(){var u=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!C){(C=dcl.loadModule("@decentraland/CommunicationsController")).then((function(u){_=u}));var u=p();dcl.subscribe("comms"),dcl.onEvent((function(y){"comms"===y.type&&u.notifyObservers(y.data)}))}return C}().then((function(y){u.connected=!0,u.flush()}))}return t.prototype.on=function(u,y){return p().add((function(m){try{var b=JSON.parse(m.message);b.message===u&&y(b.payload,m.sender)}catch(m){dcl.error("Error parsing comms message "+m.message,m)}}))},t.prototype.sendRaw=function(u){this.messageQueue.push(u),this.connected&&this.flush()},t.prototype.emit=function(u,y){var m=JSON.stringify({message:u,payload:y});this.sendRaw(m),p().notifyObservers({message:m,sender:"self"})},t.prototype.flush=function(){var u=this;if(0!==this.messageQueue.length&&this.connected&&_&&!this.flushing){var y=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(_.rpcHandle,"send",[y]).then((function(y){u.flushing=!1,u.flush()}),(function(y){u.flushing=!1,g.error("Error flushing MessageBus",y)}))}},t}();y.MessageBus=w}])),function(u){"use strict";var y=[],m={baseUrl:""},b={};function s(u,y,m){return void 0===m&&(m=[]),{name:u,dclamd:1,handlers:m,context:y,exports:{}}}function r(u,g,_){var C=arguments.length;function r(){var m,g;b[u]?(m=b[u].handlers,g=b[u].context):b[u]=s(u);var C=b[u];C.exports="function"==typeof _?_.apply(null,y.slice.call(arguments,0))||b[u].exports||{}:_,C.dclamd=2,C.context=g;for(var x=0,w=m?m.length:0;x<w;x++)m[x](C.exports)}1===C?(_=u,g=["require","exports","module"],u=null):2===C&&("[object Array]"===m.toString.call(u)?(_=g,g=u,u=null):(_=g,g=["require","exports","module"])),u?(b[u]||(b[u]=s(u)),i(u),b[u].dependencies=g.map((function(y){return h(y,u)})),p(g,r,u)):y.push([g,_])}function i(u){var y,m=u.split("/");if("index"===m[m.length-1]&&m.length>1){m.pop();var g=m.join("/"),_=b[g];b[g]=b[u],_&&(b[g].context=_.context,(y=b[g].handlers).push.apply(y,_.handlers))}}function p(u,y,m){var g=[],_=0,C=!1;if("string"==typeof u){if(b[u]&&2===b[u].dclamd)return b[u];throw new Error(u+" has not been defined. Please include it as a dependency in "+m+"'s define()")}for(var x=u.length,e=function(w){switch(u[w]){case"require":var e=function(u,y){return p(u,y,m)};e.toUrl=function(u){return h(u,m)},g[w]=e,_++;break;case"exports":g[w]=b[m].exports,_++;break;case"module":g[w]={id:m,uri:h(m)},_++;break;default:!function(u,y){if(!b[u]||!b[u].dependencies)return!1;var m=b[u].dependencies,g=[u,"require","exports","module"];if(-1!==g.indexOf(y))return!0;for(var _=m.filter((function(u){return-1===g.indexOf(u)}));_.length>0;){if(-1!==_.indexOf(y))return!0;var C=_.shift();g.push(C);var x=b[C];if(x&&x.dependencies)for(var w=0;w<x.dependencies.length;w++){var O=x.dependencies[w];-1===g.indexOf(O)&&-1===_.indexOf(O)&&_.push(O)}}return!1}(u[w],m)?v(u[w],(function(u){g[w]=u,++_===x&&y&&(C=!0,y.apply(null,g))}),m):(g[w]=b[u[w]].exports,_++)}},w=0;w<x;w++)e(w);!C&&_===x&&y&&y.apply(null,g)}function l(u,m){return function(){return dcl.callRpc(u,m.name,y.slice.call(arguments,0))}}function v(u,y,m){if(u=m?h(u,m):u,b[u])1===b[u].dclamd?y&&b[u].handlers.push(y):y&&y(b[u].exports);else{var g=b[u]=s(u,m,[y]);0===u.indexOf("@")&&"undefined"!=typeof dcl&&dcl.loadModule(u).then((function(u){var y={};for(var m in u.methods){var b=u.methods[m];y[b.name]=l(u.rpcHandle,b)}g.dclamd=2,g.exports=y;var _=g.handlers;for(m=0;m<_.length;m++)_[m](y)}))}}function h(u,y){var b=!1;switch(u){case"require":case"exports":case"module":return u}var g=(y||m.baseUrl).split("/");g.pop();for(var _=u.split("/"),C=_.length;--C;)switch(_[0]){case"..":g.pop();case".":case"":_.shift(),b=!0}return(g.length&&b?g.join("/")+"/":"")+_.join("/")}u.config=function(u){if("object"==typeof u)for(var y in u)u.hasOwnProperty(y)&&(m[y]=u[y])},u.define=r,function(u){u.amd={}}(r=u.define||(u.define={})),u.require=p,"undefined"!=typeof dcl&&dcl.onStart((function(){var u=[];for(var y in b)b[y]&&1===b[y].dclamd&&u.push(b[y]);if(u.length)throw new Error("These modules didn't load: "+u.map((function(u){return u.name})).join(", "))})),p.toUrl=h}(loader||(loader={})),global="undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==this?this:null,!global)throw new Error("unknown global context");global.define=loader.define,global.dclamd=loader;var __decorate=this&&this.__decorate||function(u,y,m,b){var g,_=arguments.length,C=_<3?y:null===b?b=Object.getOwnPropertyDescriptor(y,m):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(u,y,m,b);else for(var x=u.length-1;x>=0;x--)(g=u[x])&&(C=(_<3?g(C):_>3?g(y,m,C):g(y,m))||C);return _>3&&C&&Object.defineProperty(y,m,C),C},__values=this&&this.__values||function(u){var y="function"==typeof Symbol&&Symbol.iterator,m=y&&u[y],b=0;if(m)return m.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&b>=u.length&&(u=void 0),{value:u&&u[b++],done:!u}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};define("physics-lib/PhysicsComponent",["require","exports"],(function(u,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.PhysicsComponent=void 0;var m=function(){function PhysicsComponent(){this.velocity=Vector3.Zero(),this.acceleration=Vector3.Zero(),this.mass=0,this.rigid=!1}return __decorate([Component("physics.component")],PhysicsComponent)}();y.PhysicsComponent=m})),define("physics-lib/GravitySystem",["require","exports","physics-lib/PhysicsComponent"],(function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.GravitySystem=void 0;var b=Vector3.Zero(),g=function(){function GravitySystem(){this.group=engine.getComponentGroup(Transform,m.PhysicsComponent)}return GravitySystem.prototype.update=function(u){var y,g,_,C,x=150*u;try{for(var w=__values(this.group.entities),O=w.next();!O.done;O=w.next()){var T=O.value,R=T.getComponent(m.PhysicsComponent);if(!R.rigid){var A=T.getComponent(Transform);R.acceleration.setAll(0);try{for(var E=(_=void 0,__values(this.group.entities)),P=E.next();!P.done;P=E.next()){var S=P.value;if(S!==T){var I=S.getComponent(Transform).position,z=S.getComponent(m.PhysicsComponent);if(b.copyFrom(A.position).subtractInPlace(I),0!==b.length()){var M=z.mass*R.mass*6674e-14/b.length(),F=b.scale(-M);R.acceleration.addInPlace(F)}}}}catch(u){_={error:u}}finally{try{P&&!P.done&&(C=E.return)&&C.call(E)}finally{if(_)throw _.error}}A.lookAt(A.position.add(R.velocity)),R.velocity.addInPlace(R.acceleration.scale(x)),A.position.addInPlace(R.velocity.scale(x))}}}catch(u){y={error:u}}finally{try{O&&!O.done&&(g=w.return)&&g.call(w)}finally{if(y)throw y.error}}},GravitySystem}();y.GravitySystem=g})),define("physics-lib/BoundaryCheckSystem",["require","exports"],(function(u,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BoundaryCheckSystem=void 0;var m=function(){function BoundaryCheckSystem(){this.group=engine.getComponentGroup(Transform)}return BoundaryCheckSystem.prototype.update=function(){var u,y;try{for(var m=__values(this.group.entities),b=m.next();!b.done;b=m.next()){var g=b.value.getComponent(Transform).position;g.x>15.5&&(g.x=15.5),g.y>15.5&&(g.y=15.5),g.z>15.5&&(g.z=15.5),g.x<.5&&(g.x=.5),g.y<.5&&(g.y=.5),g.z<.5&&(g.z=.5)}}catch(y){u={error:y}}finally{try{b&&!b.done&&(y=m.return)&&y.call(m)}finally{if(u)throw u.error}}},BoundaryCheckSystem}();y.BoundaryCheckSystem=m})),define("physics-lib",["require","exports","physics-lib/PhysicsComponent","physics-lib/GravitySystem","physics-lib/BoundaryCheckSystem"],(function(u,y,m,b,g){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BoundaryCheckSystem=y.GravitySystem=y.PhysicsComponent=void 0,Object.defineProperty(y,"PhysicsComponent",{enumerable:!0,get:function(){return m.PhysicsComponent}}),Object.defineProperty(y,"GravitySystem",{enumerable:!0,get:function(){return b.GravitySystem}}),Object.defineProperty(y,"BoundaryCheckSystem",{enumerable:!0,get:function(){return g.BoundaryCheckSystem}})})),define("game",["require","exports","physics-lib"],(function(u,y,m){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var b=new BoxShape,g=new Material;function spawn(u,y,_,C){var x=new Entity,w=new m.PhysicsComponent,O=new Transform;O.position.set(u,y,_),w.rigid=C,w.mass=w.rigid?1e4:100*Math.random(),x.addComponentOrReplace(w),x.addComponentOrReplace(O),x.addComponentOrReplace(g),w.rigid?x.addComponentOrReplace(b):(x.addComponentOrReplace(b),O.scale.set(.01+w.mass/1e3,.01+w.mass/1e3,.01+w.mass/1e3)),engine.addEntity(x),w.velocity.x=_>5?.02:-.02}g.albedoColor=Color3.Black(),g.emissiveColor=Color3.White(),spawn(8,1,8,!0),engine.addSystem(new m.GravitySystem),engine.addSystem(new m.BoundaryCheckSystem);for(var _=0;_<8;_++)for(var C=0;C<8;C++)spawn(Math.random()+7.5,5+Math.random()/2,15*Math.random()+1,!1)}));